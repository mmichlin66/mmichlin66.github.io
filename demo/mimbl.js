!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("mimcss")):"function"==typeof define&&define.amd?define(["mimcss"],e):"object"==typeof exports?exports.mimbl=e(require("mimcss")):t.mimbl=e(t.mimcss)}(this,(function(t){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=10)}([function(t,e,r){"use strict";r.d(e,"f",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"h",(function(){return l})),r.d(e,"k",(function(){return c})),r.d(e,"i",(function(){return h})),r.d(e,"j",(function(){return d})),r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return g})),r.d(e,"g",(function(){return y})),r.d(e,"l",(function(){return v})),r.d(e,"m",(function(){return b}));var i=r(5),n=r(1);function s(t,e,...r){return Object(i.a)(t,e,r)}let o=Symbol("symRef");class u{constructor(t,e){this.changedEvent=new n.d,void 0!==t&&this.changedEvent.attach(t),this[o]=e}addListener(t){this.changedEvent.attach(t)}removeListener(t){this.changedEvent.detach(t)}get r(){return this[o]}set r(t){this[o]!==t&&(this[o]=t,this.changedEvent.fire(t))}}function l(t,e){let r=Symbol(e+"_ref");function i(t){let e=t[r];return e||(e=new a,e.proxy=new Proxy({},e),t[r]=e),e}Object.defineProperty(t,e,{set(t){i(this).obj=t},get(){return i(this).proxy}})}class a{get(t,e,r){if("r"===e)return this.obj;let i=this.obj[e];return"function"==typeof i?i.bind(this.obj):i}set(t,e,r,i){return"r"===e?this.obj=r:this.obj[e]=r,!0}deleteProperty(t,e){return Reflect.deleteProperty(this.obj,e)}defineProperty(t,e,r){return Reflect.defineProperty(this.obj,e,r)}has(t,e){return Reflect.has(this.obj,e)}getPrototypeOf(t){return Reflect.getPrototypeOf(this.obj)}isExtensible(t){return Reflect.isExtensible(this.obj)}getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(this.obj,e)}enumerate(t){return Array.from(Reflect.enumerate(this.enumerate))}ownKeys(t){return Reflect.ownKeys(this.obj)}}function c(t,e,r){"object"==typeof t?void 0!==r&&t.r!==r||(t.r=e):"function"==typeof t&&t(e)}function h(t,e){n.b.registerProperty(t,{type:3,handlerClass:e})}function d(t){n.b.registerProperty(t,{type:2})}class f{constructor(t){t&&(this.props=t)}updateMe(...t){if(this.vn)if(0===t.length)this.vn.requestUpdate();else for(let e of t)"function"==typeof e?n.e.update(e,void 0,this):n.e.update(e.func,e.key,e.thisArg?e.thisArg:this,!e.args||Array.isArray(e.args)?e.args:[e.args])}callMeBeforeUpdate(t,e){this.vn&&this.vn.scheduleCallBeforeUpdate(t,e||this)}callMeAfterUpdate(t,e){this.vn&&this.vn.scheduleCallAfterUpdate(t,e||this)}wrapCallback(t,e){return Object(i.e)(t,e,this.vn)}}function p(t){}class m extends f{constructor(t){super(t)}render(){}static update(t,e,r,...i){n.e.update(t,e,r,i)}}class g extends f{constructor(t){super(t)}render(){}}function y(t,e=null){Object(n.p)(t,e)}function v(t=null){Object(n.C)(t)}function b(t,e){let r="_m_"+e;Object.defineProperty(t,e,{set(t){if(this[r]!==t){this[r]=t;let e=this.vn;e&&!e.updateRequested&&this.vn.requestUpdate()}},get(){return this[r]}})}},function(t,e,r){"use strict";function i(t,e){if(t===e)return!0;if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(typeof t!=typeof e)return!1;if("object"==typeof t){for(let r in t)if(!i(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}else{if(Array.isArray(t)!==Array.isArray(e))return!1;if(!Array.isArray(t))return!1;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(!i(t[r],e[r]))return!1}return!0}function n(t){return"ownerSVGElement"in t}function s(t){return"svg"===t.tagName}r.d(e,"w",(function(){return i})),r.d(e,"y",(function(){return n})),r.d(e,"z",(function(){return s})),r.d(e,"d",(function(){return o.a})),r.d(e,"m",(function(){return u.e})),r.d(e,"n",(function(){return u.f})),r.d(e,"o",(function(){return u.g})),r.d(e,"B",(function(){return u.h})),r.d(e,"b",(function(){return c})),r.d(e,"l",(function(){return m})),r.d(e,"k",(function(){return y})),r.d(e,"a",(function(){return b})),r.d(e,"g",(function(){return w})),r.d(e,"h",(function(){return S})),r.d(e,"c",(function(){return N})),r.d(e,"f",(function(){return D})),r.d(e,"e",(function(){return M})),r.d(e,"i",(function(){return E})),r.d(e,"j",(function(){return P})),r.d(e,"p",(function(){return R})),r.d(e,"C",(function(){return j})),r.d(e,"x",(function(){return B})),r.d(e,"q",(function(){return W})),r.d(e,"s",(function(){return F})),r.d(e,"r",(function(){return $})),r.d(e,"t",(function(){return q})),r.d(e,"v",(function(){return K.c})),r.d(e,"D",(function(){return K.e})),r.d(e,"u",(function(){return K.b})),r.d(e,"A",(function(){return K.d}));var o=r(3),u=r(4),l=r(2);function a(t){return null==t?"":"string"==typeof t?t:Array.isArray(t)?t.map(t=>a(t)).filter(t=>!!t).join(" "):t.toString()}class c{static registerProperty(t,e){c.propInfos[t]=e}static getPropertyInfo(t){return c.propInfos[t]}static setAttr(t,e,r,i){if(void 0===r)t.setAttribute(e,a(i));else{let n=r.attrName;void 0===n&&(n=e),void 0!==r.set?r.set(t,n,i):t.setAttribute(n,a(i))}}static updateAttr(t,e,r,i,n){if(void 0===r)return i!==n&&(t.setAttribute(e,a(n)),!0);let s;if(void 0!==r.diff){if(s=r.diff(e,i,n),void 0===s)return!1}else i!==n&&(s=n);let o=r.attrName;return void 0===o&&(o=e),void 0!==r.update?r.update(t,o,s):(void 0!==r.remove&&r.remove(t,o),void 0!==r.set?r.set(t,o,s):t.setAttribute(o,a(s))),!0}static removeAttr(t,e,r){if(void 0===r)t.removeAttribute(e);else{let i=r.attrName;void 0===i&&(i=e),void 0!==r.remove?r.remove(t,i):t.removeAttribute(i)}}}function h(t,e,r){t.value=r}function d(t,e,r){}function f(t,e){}function p(t,e,r){t.checked=r}c.propInfos={style:{type:1,set:function(t,e,r){Object(l.setElementStyle)(t,r,1)},diff:function(t,e,r){let i=Object(l.diffStylesets)(e,r);return null==i?void 0:i},update:function(t,e,r){Object(l.setElementStringStyle)(t,r,1)}},value:{type:1,set:h,diff:function(t,e,r){return r},remove:function(t,e){t.value=null}},defaultValue:{type:1,set:h,diff:d,remove:f},checked:{type:1,set:p,diff:function(t,e,r){return r},remove:function(t,e){t.checked=!1}},defaultChecked:{type:1,set:p,diff:d,remove:f},abort:{type:2},animationcancel:{type:2},animationend:{type:2},animationiteration:{type:2},animationstart:{type:2},auxclick:{type:2},blur:{type:2},cancel:{type:2},canplay:{type:2},canplaythrough:{type:2},change:{type:2},click:{type:2},close:{type:2},contextmenu:{type:2},cuechange:{type:2},dblclick:{type:2},drag:{type:2},dragend:{type:2},dragenter:{type:2},dragleave:{type:2},dragover:{type:2},dragstart:{type:2},drop:{type:2},durationchange:{type:2},emptied:{type:2},ended:{type:2},error:{type:2},focus:{type:2},gotpointercapture:{type:2},input:{type:2},invalid:{type:2},keydown:{type:2},keypress:{type:2},keyup:{type:2},load:{type:2},loadeddata:{type:2},loadedmetadata:{type:2},loadend:{type:2},loadstart:{type:2},lostpointercapture:{type:2},mousedown:{type:2},mouseenter:{type:2,isBubbling:!1},mouseleave:{type:2,isBubbling:!1},mousemove:{type:2},mouseout:{type:2},mouseover:{type:2},mouseup:{type:2},pause:{type:2},play:{type:2},playing:{type:2},pointercancel:{type:2},pointerdown:{type:2},pointerenter:{type:2},pointerleave:{type:2},pointermove:{type:2},pointerout:{type:2},pointerover:{type:2},pointerup:{type:2},progress:{type:2},ratechange:{type:2},reset:{type:2},resize:{type:2},scroll:{type:2},seeked:{type:2},seeking:{type:2},select:{type:2},stalled:{type:2},submit:{type:2},suspend:{type:2},timeupdate:{type:2},toggle:{type:2},touchcancel:{type:2},touchend:{type:2},touchenter:{type:2},touchleave:{type:2},touchmove:{type:2},touchstart:{type:2},transitioncancel:{type:2},transitionend:{type:2},transitionrun:{type:2},transitionstart:{type:2},volumechange:{type:2},waiting:{type:2},wheel:{type:2},fullscreenchange:{type:2},fullscreenerror:{type:2},copy:{type:2},cut:{type:2},paste:{type:2}};class m{constructor(t,e){this.shouldCommit=t,this.shouldRender=e}static getStockValue(t,e){return t?e?m.DoCommitDoRender:m.DoCommitNoRender:e?m.NoCommitDoRender:m.NoCommitNoRender}}m.DoCommitDoRender=new m(!0,!0),m.DoCommitNoRender=new m(!0,!1),m.NoCommitDoRender=new m(!1,!0),m.NoCommitNoRender=new m(!1,!1);var g=r(0);class y{constructor(){}init(t,e){this.parent=t,this.depth=this.parent?this.parent.depth+1:0,this.creator=e}term(){void 0!==this.publishedServices&&(this.publishedServices.forEach((t,e)=>F(e,this)),this.publishedServices.clear()),void 0!==this.subscribedServices&&(this.subscribedServices.forEach((t,e)=>q(e,this)),this.subscribedServices.clear()),this.next=void 0,this.prev=void 0,this.subNodes=void 0,this.creator=void 0,this.depth=void 0,this.parent=void 0}get isMounted(){return!!this.anchorDN}requestUpdate(){this.updateRequested||(Object(K.b)(this),this.updateRequested=!0)}scheduleCallBeforeUpdate(t,e){Object(K.d)(t,!0,e,this)}scheduleCallAfterUpdate(t,e){Object(K.d)(t,!1,e,this)}publishService(t,e){void 0===this.publishedServices&&(this.publishedServices=new Map),this.publishedServices.get(t)!==e&&(this.publishedServices.set(t,e),W(t,this))}unpublishService(t){void 0!==this.publishedServices&&(this.publishedServices.delete(t),F(t,this),0===this.publishedServices.size&&(this.publishedServices=void 0))}subscribeService(t,e,r,i){void 0===this.subscribedServices&&(this.subscribedServices=new Map);let n=new v;n.ref=e,n.defaultService=r,n.useSelf=!!i,this.subscribedServices.set(t,n),$(t,this),Object(g.k)(e,this.getService(t,r))}unsubscribeService(t){if(void 0===this.subscribedServices)return;let e=this.subscribedServices.get(t);void 0!==e&&(Object(g.k)(e.ref,void 0),this.subscribedServices.delete(t),q(t,this),0===this.subscribedServices.size&&(this.subscribedServices=void 0))}getService(t,e,r){let i=this.findService(t,r);return void 0!==i?i:e}findService(t,e){if(e&&void 0!==this.publishedServices){let e=this.publishedServices.get(t);if(void 0!==e)return e}return this.parent?this.parent.findService(t,!0):void 0}notifyServiceChanged(t){if(void 0===this.subscribedServices)return;let e=this.subscribedServices.get(t);void 0!==e&&Object(g.k)(e.ref,this.getService(t,e.defaultService))}wrapCallback(t,e){return Object(K.e)(t,e,this)}}class v{}class b extends y{get updateStrategy(){return this.comp.getUpdateStrategy?this.comp.getUpdateStrategy():void 0}render(){return this.renderWatcher()}willMount(){this.comp.vn=this,this.comp.willMount&&this.comp.willMount(),this.renderWatcher=Object(u.e)(this.comp.render,this.requestUpdate,this.comp,this)}willUnmount(){if(this.renderWatcher.dispose(),this.renderWatcher=null,this.comp.willUnmount)try{this.comp.willUnmount()}catch(t){console.error(`Exception in willUnmount of component '${this.name}'`,t)}this.comp.vn=void 0,this.comp=void 0}didMount(){if(this.comp.didMount)try{this.comp.didMount()}catch(t){console.error(`Exception in didMount of component '${this.name}'`,t)}}get supportsErrorHandling(){return void 0!==this.comp.handleError}handleError(t,e){this.comp.handleError(t,e)}}class w extends b{constructor(t){super(),this.comp=t}get name(){return this.comp.displayName?this.comp.displayName:this.comp.constructor.name}get key(){return this.comp}prepareUpdate(t){let e=t.comp,r=this.comp!==e;return r&&(this.willUnmount(),this.comp=e,this.willMount()),m.getStockValue(!1,r)}}class S extends b{constructor(t,e,r){if(super(),this.compClass=t,this.props={},e){for(let t in e){let r=e[t];null!=r&&("key"===t?this.key=r:"ref"===t?this.ref=r:this.props[t]=r)}void 0===this.key&&(this.key=e.id)}this.props.children=r}get name(){if(this.comp&&this.comp.displayName)return this.comp.displayName;{let t=this.compClass.name;return null!=this.key&&(t+="@"+this.key),t}}init(t,e){super.init(t,e),this.comp=new this.compClass(this.props)}willMount(){super.willMount(),void 0!==this.ref&&Object(g.k)(this.ref,this.comp)}willUnmount(){void 0!==this.ref&&Object(g.k)(this.ref,void 0,this.comp),super.willUnmount()}isUpdatePossible(t){return this.compClass===t.compClass}prepareUpdate(t){let e=t,r=!0;return void 0!==this.comp.shouldUpdate&&(r=this.comp.shouldUpdate(e.props)),e.ref!==this.ref?(this.ref=e.ref,void 0!==this.ref&&Object(g.k)(this.ref,this.comp)):void 0===e.ref&&Object(g.k)(this.ref,void 0,this.comp),this.key=e.key,Object.keys(this.props).forEach(t=>delete this.props[t]),Object.assign(this.props,e.props),m.getStockValue(!1,r)}}class N extends y{constructor(t,e,r){super(),this.elmName=t,this.props=e,this.children=r,e&&(this.key=e.key,void 0===this.key&&(this.key=e.id))}get name(){let t=this.elmName;return null!=this.key&&(t+="@"+this.key),t}get ownDN(){return this.elm}render(){return this.children}mount(){let t=x.getSvgElmInfo(this.elmName);return this.isSvg=void 0!==t&&(!0!==t||this.anchorDN.namespaceURI.endsWith("svg")),this.elm=this.isSvg?this.elm=document.createElementNS(x.namespace,x.getElmName(t,this.elmName)):this.elm=document.createElement(this.elmName),this.parseProps(),this.attrs&&this.addAttrs(),this.events&&this.addEvents(),this.customAttrs&&this.addCustomAttrs(),void 0!==this.ref&&Object(g.k)(this.ref,this.elm),this.elm}unmount(){void 0!==this.ref&&Object(g.k)(this.ref,void 0,this.elm),this.customAttrs&&this.removeCustomAttrs(!0),this.elm=null}isUpdatePossible(t){return this.elmName===t.elmName}prepareUpdate(t){let e=!i(this.props,t.props),r=this.children&&this.children.length>0||t.children&&t.children.length>0;return this.props=t.props,this.children=t.children,{shouldCommit:e,shouldRender:r}}commitUpdate(t){const e=t;e.parseProps(),e.ref!==this.ref&&(this.ref=e.ref,void 0!==this.ref&&Object(g.k)(this.ref,this.elm)),this.key=e.key,this.updateStrategy=e.updateStrategy,this.updateAttrs(e.attrs),this.updateEvents(e.events),this.updateCustomAttrs(e.customAttrs)}parseProps(){if(!this.props)return;let t,e,r;for(let i in this.props)if("key"!==i&&(t=this.props[i],null!=t&&!1!==t))if("ref"===i)this.ref=t;else if("updateStrategy"===i)this.updateStrategy=t;else if(e=c.getPropertyInfo(i),r=e?e.type:1,1===r)this.attrs||(this.attrs={}),this.attrs[i]={info:e,val:t};else if(2===r){let r=C(e,t);r&&(this.events||(this.events={}),this.events[i]=r)}else this.customAttrs||(this.customAttrs={}),this.customAttrs[i]={info:e,val:t,handler:void 0}}addAttrs(){for(let t in this.attrs){let e=this.attrs[t];c.setAttr(this.elm,t,e.info,e.val)}}updateAttrs(t){let e=this.elm,r=this.attrs;if(r)for(let i in r){let n=r[i],s=t?t[i]:void 0;s&&s.val?c.updateAttr(e,i,n.info,n.val,s.val):c.removeAttr(e,i,n.info)}if(t)for(let i in t){if(r&&i in r)continue;let n=t[i];c.setAttr(e,i,n.info,n.val)}this.attrs=t}addEvents(){for(let t in this.events)this.addEvent(t,this.events[t])}addEvent(t,e){e.wrapper=this.createEventWrapper(e),this.elm.addEventListener(t,e.wrapper,e.useCapture)}removeEvent(t,e){this.elm.removeEventListener(t,e.wrapper,e.useCapture)}updateEvents(t){let e=this.events;if(e)for(let r in e){let i=e[r],n=t?t[r]:void 0;n?this.updateEvent(r,i,n):this.removeEvent(r,i)}if(t)for(let r in t)e&&r in e||this.addEvent(r,t[r]);this.events=t}updateEvent(t,e,r){return e.orgFunc===r.orgFunc&&e.that===r.that&&e.useCapture==r.useCapture?(r.wrapper=e.wrapper,!1):(this.elm.removeEventListener(t,e.wrapper,e.useCapture),r.wrapper=this.createEventWrapper(r),this.elm.addEventListener(t,r.wrapper,r.useCapture),!0)}createEventWrapper(t){return this.wrapCallback(t.orgFunc,t.that?t.that:this.creator)}addCustomAttrs(){for(let t in this.customAttrs){let e=this.customAttrs[t];try{e.handler=new e.info.handlerClass(this,e.val,t)}catch(e){console.error(`Error creating handler for custom attribute '${t}': ${e.message}`),delete this.customAttrs[t];continue}}}removeCustomAttrs(t){for(let e in this.customAttrs){let r=this.customAttrs[e];try{r.handler.terminate(t)}catch(t){console.error(`Error terminating handler for custom attribute '${e}': ${t.message}`)}}}updateCustomAttrs(t){let e=this.customAttrs;if(e)for(let r in e){const i=e[r],n=t?t[r]:void 0;if(n){try{i.handler.update(n.val)}catch(t){console.error(`Error updating handler for custom attribute '${r}': ${t.message}`)}n.handler=i.handler}else try{i.handler.terminate(!1)}catch(t){console.error(`Error terminating handler for custom attribute '${r}': ${t.message}`)}}if(t)for(let r in t){if(e&&r in e)continue;let i=t[r];try{i.handler=new i.info.handlerClass(this,i.val,r)}catch(e){console.error(`Error creating handler for custom attribute '${r}': ${e.message}`),delete t[r];continue}}this.customAttrs=t}}function C(t,e){if("function"==typeof e)return{info:t,orgFunc:e};if(Array.isArray(e)){if(2===e.length)return"boolean"==typeof e[1]?{info:t,orgFunc:e[0],useCapture:e[1]}:{info:t,orgFunc:e[0],that:e[1]};if(3===e.length)return{info:t,orgFunc:e[0],that:e[1],useCapture:e[2]}}}class x{static register(t,e){x.infos[t]=e}static isSvgElm(t){return t in x.infos}static getSvgElmInfo(t){return x.infos[t]}static isDualPurpose(t){return Array.isArray(t)?t.length>1&&t[1]:"string"!=typeof t&&t}static isTagDualPurpose(t){let e=x.infos[t];return!!e&&x.isDualPurpose(e)}static getElmName(t,e){return Array.isArray(t)?t.length>0?t[0]:e:"string"==typeof t?t:e}static getElmNameForTag(t){let e=x.infos[t];return e?x.getElmName(e,t):t}}x.namespace="http://www.w3.org/2000/svg",x.infos={svg:!1,a:!0,animate:!1,animateMotion:!1,animateTransform:!1,circle:!1,clipPath:!1,colorProfile:"color-profile",defs:!1,desc:!1,discard:!1,ellipse:!1,feBlend:!1,feColorMatrix:!1,feComponentTransfer:!1,feComposite:!1,feConvolveMatrix:!1,feDiffuseLighting:!1,feDisplacementMap:!1,feDistantLight:!1,feDropShadow:!1,feFlood:!1,feFuncA:!1,feFuncB:!1,feFuncG:!1,feFuncR:!1,feGaussianBlur:!1,feImage:!1,feMerge:!1,feMergeNode:!1,feMorphology:!1,feOffset:!1,fePointLight:!1,feSpecularLighting:!1,feSpotLight:!1,feTile:!1,feTurbulence:!1,filter:!1,foreignObject:!1,g:!1,hatch:!1,hatchpath:!1,image:!1,line:!1,linearGradient:!1,marker:!1,mask:!1,metadata:!1,mpath:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,script:!0,set:!1,solidcolor:!1,stop:!1,style:!0,switch:!1,symbol:!1,text:!1,textPath:!1,title:!0,textSpan:!1,use:!1,view:!1};class D extends y{constructor(t,e,r){if(super(),this.func=t,this.props={},e){for(let t in e){let r=e[t];null!=r&&("key"===t?this.key=r:this.props[t]=r)}void 0===this.key&&(this.key=e.id)}this.props.children=r}static isVNaFragment(t){return t.func===g.b}get name(){let t=this.func.name;return null!=this.key&&(t+="@"+this.key),t}render(){return this.func(this.props)}isUpdatePossible(t){return this.func===t.func}prepareUpdate(t){let e=t;return this.key=e.key,this.func=e.func,this.props=e.props,m.NoCommitDoRender}}let k=Symbol("symKeysToNodes");class M extends y{constructor(t){super(),this.func=t.func,this.thisArg=t.thisArg,this.args=t.args,this.key=t.key,this.renderRequired=!1}replaceArgs(t){this.args=t,this.renderRequired=!0}get renderOnUpdate(){return this.renderRequired}get name(){let t=this.func.name;return null!=this.key&&(t+="@"+this.key),t}render(){return this.funcWatcher?this.funcWatcher(this.args):null}willMount(){void 0===this.thisArg&&(this.thisArg=this.creator),this.linkKey=this.key||this.thisArg||this.func,this.linkNodeToFunc(),this.funcWatcher=Object(u.e)(this.func,this.updateFromWatcher,this.thisArg,this)}willUnmount(){this.funcWatcher.dispose(),this.funcWatcher=null,this.unlinkNodeFromFunc()}isUpdatePossible(t){let e=t;return this.func===e.func&&this.thisArg===e.thisArg}prepareUpdate(t){let e=t;return this.key=e.key,this.linkKey=e.linkKey,this.args=e.args,m.DoCommitDoRender}commitUpdate(t){this.renderRequired=!1}static findVN(t,e,r){let i=e||r||K.c||t,n=t[k];return n&&n.get(i)}static update(t,e,r,i){let n=M.findVN(t,e,r);n&&(n.args=i,n.renderRequired=!0,n.requestUpdate())}updateFromWatcher(){this.renderRequired=!0,this.requestUpdate()}linkNodeToFunc(){let t=this.func[k];t||(t=new Map,this.func[k]=t),t.set(this.linkKey,this)}unlinkNodeFromFunc(){let t=this.func[k];t&&t.delete(this.linkKey)}}class E extends y{constructor(t,e){super(),this.promise=t.promise,this.errorContentFunc=t.errorContentFunc,this.content=e,this.key=t.key}get isSettled(){return null==this.promise}get name(){let t="Promise";return null!=this.key&&(t+="@"+this.key),t}render(){return this.content}willMount(){this.watchPromise()}isUpdatePossible(t){let e=t;return this.promise===e.promise}prepareUpdate(t){let e=t;return this.key=e.key,this.content=e.content,this.errorContentFunc=e.errorContentFunc,m.NoCommitDoRender}async watchPromise(){try{this.content=await this.promise,this.promise=null,this.isMounted&&this.requestUpdate()}catch(t){if(this.promise=null,this.content=null,!this.isMounted)return;if(this.errorContentFunc)try{this.content=this.errorContentFunc(t)}catch(t){console.warn("Unhandled rejected promise:",t)}else console.warn("Unhandled rejected promise:",t);this.requestUpdate()}}}class P extends y{constructor(t){super(),this.text=t}get name(){return"#text"}get ownDN(){return this.textNode}mount(){return this.textNode=document.createTextNode(this.text)}unmount(){this.textNode=void 0}prepareUpdate(t){return m.getStockValue(this.text!==t.text,!1)}commitUpdate(t){this.textNode.nodeValue=this.text=t.text}}class O extends y{constructor(t){super(),this.error=!1,this.waiting=!1,this.thrownPromises=new Set,this.anchorDN=t,this.depth=0}get name(){return"Root"}setContent(t,e){this.content=t,Object(K.b)(this)}render(){return this.error||this.waiting?null:this.content}willMount(){this.publishService("StdErrorHandling",this)}willUnmount(){this.unpublishService("StdErrorHandling")}get supportsErrorHandling(){return!0}handleError(t,e){if(t instanceof Promise){let e=t;this.thrownPromises.add(e),e.then(()=>{this.onPromiseFulfilled(e)}),e.catch(()=>{this.onPromiseFulfilled(e)}),this.waiting=!0}else console.error(`Unhandled error in component\n${e.join("\n")}\n`,t),this.error=!0}restart(){this.error=!1,Object(K.b)(this)}reportError(t,e){this.handleError(t,e),Object(K.b)(this)}onPromiseFulfilled(t){this.thrownPromises.delete(t),0===this.thrownPromises.size&&(this.waiting=!1,Object(K.b)(this))}}let A=Symbol("symRootMountPoint");function R(t,e){let r=e||document.body,i=r[A];i||(i=new O(r),r[A]=i,i.willMount()),i.setContent(t,!1)}function j(t){let e=t||document.body;if(!e)return;let r=e[A];r&&(delete e[A],r.setContent(null,!1),r.scheduleCallAfterUpdate(()=>r.willUnmount()))}class U{init(t){this.doDOMUpdate=t}scheduleDOMUpdate(){Object(K.d)(this.onUpdate,!1,this)}cancelDOMUpdate(){}onUpdate(){this.doDOMUpdate()}}function B(){let t=Object(l.registerScheduler)(new U);return Object(l.setDefaultSchedulerType)(t),t}class V{constructor(){this.publishingVNs=new Set,this.subscribedVNs=new Set}}let T=new Map;function W(t,e){let r=T.get(t);void 0===r&&(r=new V,T.set(t,r)),r.publishingVNs.add(e);for(let e of r.subscribedVNs)e.notifyServiceChanged(t)}function F(t,e){let r=T.get(t);if(void 0!==r)if(r.publishingVNs.delete(e),0===r.publishingVNs.size&&0===r.subscribedVNs.size)T.delete(t);else for(let e of r.subscribedVNs)e.notifyServiceChanged(t)}function $(t,e){let r=T.get(t);void 0===r&&(r=new V,T.set(t,r)),r.subscribedVNs.add(e)}function q(t,e){let r=T.get(t);void 0!==r&&(r.subscribedVNs.delete(e),0===r.publishingVNs.size&&0===r.subscribedVNs.size&&T.delete(t))}var K=r(5)},function(e,r){e.exports=t},function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}));class i{constructor(){this.fire=this.realFire}attach(t){this.listeners||(this.listeners=new Set),this.listeners.add(t)}detach(t){this.listeners&&(this.listeners.delete(t),0===this.listeners.size&&(this.listeners=null))}get count(){return this.listeners?this.listeners.size:0}clear(){this.listeners=null}realFire(){if(this.listeners)for(let t of this.listeners)t(...arguments)}}function n(){return new Proxy({},new s)}class s{get(t,e,r){return this[e]?this[e]:new o(this,e)}}class o{constructor(t,e){this.handler=t,this.prop=e}fire(){this.slot&&this.slot.fire(...arguments)}clear(){this.slot&&this.slot.clear()}attach(t){this.slot||(this.slot=this.handler[this.prop]=new i),this.slot.attach(t)}detach(t){this.slot&&this.slot.detach(t)}get count(){return this.slot?this.slot.count:0}}},function(t,e,r){"use strict";var i;function n(t,e){return new s(t<0?0:t,e)}r.d(e,"d",(function(){return n})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return h})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return m})),r.d(e,"h",(function(){return N})),r.d(e,"a",(function(){return x})),function(t){t[t.Value=0]="Value",t[t.Shallow=1]="Shallow",t[t.Deep=100]="Deep"}(i||(i={}));class s{constructor(t,e){this.watchers=new Set,this.depth=t,this.v=y(e,this,t)}get(){return this.notifyRead(),this.v}set(t){t!==this.v&&(this.v=y(t,this,this.depth),this.notifyChanged())}notifyRead(){a.notifyTriggerRead(this)}notifyChanged(){this.watchers.size>0&&a.notifyTriggerChanged(this)}}let o=Symbol("symWatcher");function u(t,e,r,i){function n(...t){return n[o].execute(this,t)}return n[o]=new l(t,e,r,i),n.dispose=function(){let t=n[o];t&&t.dispose(),delete n[o]},n}class l{constructor(t,e,r,i){this.triggers=new Set,this.func=t,this.responder=e,this.funcThis=r,this.responderThis=i||r}execute(t,e){if(!this.func)throw new Error("Disposed watcher was called.");!this.funcThis&&t&&(this.funcThis=t,this.responderThis||(this.responderThis=t)),this.clean(),a.pushWatcher(this);try{return this.func.apply(this.funcThis,e)}finally{a.popWatcher()}}dispose(){this.func&&(this.clean(),this.func=null,this.responder=null,this.funcThis=null,this.responderThis=null)}respond(){this.responder&&this.responder.apply(this.responderThis)}clean(){this.triggers.forEach(t=>t.watchers.delete(this)),this.triggers.clear(),a.removeDeferredWatcher(this)}}let a=new class{constructor(){this.watcherStack=[],this.mutationScopesRefCount=0,this.deferredWatchers=new Set}pushWatcher(t){this.watcherStack.push(t)}popWatcher(){this.watcherStack.pop()}removeDeferredWatcher(t){this.deferredWatchers.delete(t)}enterMutationScope(){this.mutationScopesRefCount++}exitMutationScope(){if(0===this.mutationScopesRefCount)throw Error("Unpaired call to exitMutationScope");if(0==--this.mutationScopesRefCount){let t=Array.from(this.deferredWatchers.keys());this.deferredWatchers.clear(),t.forEach(t=>t.respond())}}notifyTriggerRead(t){for(let e of this.watcherStack)e.triggers.add(t),t.watchers.add(e)}notifyTriggerChanged(t){if(this.mutationScopesRefCount>0)t.watchers.forEach(t=>this.deferredWatchers.add(t));else{Array.from(t.watchers.keys()).forEach(t=>t.respond())}}};function c(){a.enterMutationScope()}function h(){a.exitMutationScope()}function d(t,e){return new f(t,e)}class f extends s{constructor(t,e){super(i.Value),this.func=t,this.funcThis=e,this.isStale=!0}get(){return this.isStale&&(this.funcWatcher||(this.funcWatcher=u(this.func,this.responder,this.funcThis,this)),super.set(this.funcWatcher()),this.isStale=!1),super.get()}dispose(){this.func&&(this.funcWatcher&&(this.funcWatcher.dispose(),this.funcWatcher=null),this.func=null)}responder(){this.watchers.size>0?super.set(this.funcWatcher()):this.isStale=!0}}let p=Symbol("symMutator");function m(t,e){function r(...t){return r[o].execute(this,t)}return r[p]=new g(t,e),r.dispose=function(){let t=r[p];t&&t.dispose(),delete r[p]},r}class g{constructor(t,e){this.func=t,this.funcThis=e}execute(t,e){if(!this.func)throw new Error("Disposed mutator was called.");!this.funcThis&&t&&(this.funcThis=t),a.enterMutationScope();try{return this.func.apply(this.funcThis,e)}finally{a.exitMutationScope()}}dispose(){this.func&&(this.func=null,this.funcThis=null)}}function y(t,e,r){return t&&0!==r?Array.isArray(t)?new Proxy(t,new v(e,(r||i.Shallow)-1)):t instanceof Map?new Proxy(t,new w(e,(r||i.Shallow)-1)):t instanceof Set?new Proxy(t,new S(e,(r||i.Shallow)-1)):t.constructor===Object?new Proxy(t,new v(e,(r||i.Deep)-1)):t:t}class v{constructor(t,e){this.trigger=t,this.depth=e}get(t,e,r){return this.trigger.notifyRead(),Reflect.get(t,e,r)}set(t,e,r,i){return Reflect.get(t,e,i)==r||(this.trigger.notifyChanged(),Reflect.set(t,e,y(r,this.trigger,this.depth),i))}deleteProperty(t,e){return this.trigger.notifyChanged(),Reflect.deleteProperty(t,e)}defineProperty(t,e,r){return this.trigger.notifyChanged(),Reflect.defineProperty(t,e,r)}has(t,e){return this.trigger.notifyRead(),Reflect.has(t,e)}getPrototypeOf(t){return this.trigger.notifyRead(),Reflect.getPrototypeOf(t)}isExtensible(t){return this.trigger.notifyRead(),Reflect.isExtensible(t)}getOwnPropertyDescriptor(t,e){return this.trigger.notifyRead(),Reflect.getOwnPropertyDescriptor(t,e)}enumerate(t){return this.trigger.notifyRead(),Array.from(Reflect.enumerate(t))}ownKeys(t){return this.trigger.notifyRead(),Reflect.ownKeys(t)}}class b{constructor(t,e,r){this.wrappedMethods=new Map,this.trigger=t,this.mutatorMethodNames=e,this.depth=r}get(t,e,r){this.trigger.notifyRead();let i=this,n=this.wrappedMethods.get(e);if(!n){let r=t[e];if("function"!=typeof r)return r;let s=r.bind(t);n=this.mutatorMethodNames.has(e)?function(){let r=i.callOrgMutatorMethod(t,e,s,...arguments);return r[1]&&i.trigger.notifyChanged(),r[0]}:function(){return i.trigger.notifyRead(),s(...arguments)},this.wrappedMethods.set(e,n)}return n}callOrgMutatorMethod(t,e,r,...i){return[void 0,!1]}}class w extends b{constructor(t,e){super(t,w.mutatorMethodNames,e)}callOrgMutatorMethod(t,e,r,...i){if("clear"===e){let e=t.size>0;return r(),[void 0,e]}if("set"===e)return[r(i[0],y(i[1],this.trigger,this.depth)),!0];if("delete"===e){let t=r(i[0]);return[t,t]}}}w.mutatorMethodNames=new Set(["clear","delete","set"]);class S extends b{constructor(t,e){super(t,S.mutatorMethodNames,e)}callOrgMutatorMethod(t,e,r,...i){if("add"===e)return[r(y(i[0],this.trigger,this.depth)),!0];if("clear"===e){let e=t.size>0;return r(),[void 0,e]}if("delete"===e){let t=r(i[0]);return[t,t]}}}function N(t,e){return"number"==typeof t?C.bind(void 0,t):C(void 0,t,e)}function C(t,e,r){let i=Symbol(r+"_trigger");Object.defineProperty(e,r,{get(){let e=this[i];return e||(this[i]=e=n(t)),e.get()},set(e){let r=this[i];r?r.set(e):this[i]=r=n(t,e)}})}function x(t,e,r){let i=Symbol(e);if(r.value){let t=r.value;r.value=function(e){let r=this[i];return r||(this[i]=r=d(t,this)),r.get()}}else{if(!r.get)throw new Error("@computed property requires get() accessor");let t=r.get;if(r.get=function(){let e=this[i];return e||(this[i]=e=d(t,this)),e.get()},r.set){let t=r.set;r.set=function(e){a.enterMutationScope();try{t.call(this,e)}finally{a.exitMutationScope()}}}}}S.mutatorMethodNames=new Set(["add","delete","clear"])},function(t,e,r){"use strict";r.d(e,"c",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"b",(function(){return g})),r.d(e,"d",(function(){return y})),r.d(e,"a",(function(){return W}));var i=r(0),n=r(1);let s=new Set,o=new Map,u=new Map,l=0,a=0,c=0,h=null,d=null;function f(t){let e=h;return h=t,d=t?null!=t.comp?t.comp:t.creator:null,e}function p(t,e,r){return!e&&r&&(e=null!=r.comp?r.comp:r.creator),m.bind(r,e,t)}function m(){let t=this,e=f(t||null);try{Object(n.n)();let[t,r,...i]=arguments;return r.apply(t,i)}catch(e){let r=null==t?void 0:t.getService("StdErrorHandling");if(!r)throw e;r.reportError(e,U(t))}finally{Object(n.o)(),f(e)}}function g(t){t.anchorDN||console.warn(`Update requested for virtual node '${U(t).join("->")}' that doesn't have anchor DOM node`),function(t){if(s.add(t),t instanceof n.a){let e=t.comp;e.beforeUpdate&&1!==a&&o.set(e.beforeUpdate,p(e.beforeUpdate,e,t)),e.afterUpdate&&u.set(e.afterUpdate,p(e.beforeUpdate,e,t))}}(t),1!==a&&v()}function y(t,e,r,i){e?o.has(t)||(o.set(t,p(t,r,i)),v()):u.has(t)||(u.set(t,p(t,r,i)),1!==a&&2!==a&&v())}function v(){0===l&&(l=requestAnimationFrame(b))}function b(){l=0,function(){if(c++,o.size>0){a=1;let t=o;o=new Map,w(t,!0)}if(s.size>0){a=2;let t=s;s=new Set,function(t){for(let e of t)k(e)}(function(t){let e,r=[];for(let i of t)if(i)for(let t of i){try{if(t.updateRequested=!1,t.lastUpdateTick===c)continue;e={newVN:t,action:0,oldVN:t},x(e),r.push(e)}catch(e){let r=t.getService("StdErrorHandling",void 0,!1);r?r.reportError(e,h?U(h):null):console.error("BUG: updateVirtual threw exception but StdErrorHandling service was not found.",e)}f(null)}return r}(function(t){let e=new Array(32);return t.forEach(t=>{if(!t.anchorDN)return;let r=e[t.depth];r||(r=[],e[t.depth]=r),r.push(t)}),e}(t)))}if(u.size>0){a=3;let t=u;u=new Map,w(t,!1)}a=0}()}function w(t,e){t.forEach((t,r)=>{try{t()}catch(t){console.error(`Exception while invoking function ${e?"before":"after"} updating components\n`,t)}})}function S(t,e){t.init(e,d);let r=f(t);if(t.willMount&&t.willMount(),t.render){let e=V(t.render());if(e){if(t.supportsErrorHandling)try{for(let r of e)S(r,t)}catch(r){if(t.handleError(r,U(h)),e=V(t.render()),t.subNodes)for(let r of e)S(r,t)}else for(let r of e)S(r,t);let r;for(let t of e)r&&(r.next=t,t.prev=r),r=t}t.subNodes=e}f(r)}function N(t,e,r){let i=f(t);t.anchorDN=e;let n=t.mount?t.mount():void 0;if(n&&t.anchorDN.insertBefore(n,r),t.subNodes){let i=n||e,s=n?null:r;for(let e of t.subNodes)N(e,i,s)}t.didMount&&t.didMount(),f(i)}function C(t){let e=f(t),r=t.ownDN;if(function t(e,r){if(e.lastUpdateTick=c,r&&e.subNodes)for(let r of e.subNodes){let i=f(r);t(r,!0),f(i),e.term(),e.anchorDN=void 0}e.willUnmount&&e.willUnmount()}(t,null!=r),t.unmount&&t.unmount(),r)r.remove();else if(t.subNodes)for(let e=t.subNodes.length-1;e>=0;e--)C(t.subNodes[e]);t.term(),t.anchorDN=void 0,f(e)}function x(t){let e=t.oldVN,r=f(e),i=V(e.render());if(P(t,i),i)if(e.supportsErrorHandling)try{D(t)}catch(r){e.handleError(r,U(h)),i=V(e.render()),P(t,i),D(t)}else D(t);e.lastUpdateTick=c,f(r)}function D(t){if(t.subNodeDisps){let e,r,i=t.oldVN;for(let n of t.subNodeDisps)e=n.oldVN,r=n.newVN,2===n.action?(e.renderOnUpdate||e!==r)&&e.prepareUpdate&&(n.updateDisp=e.prepareUpdate(r),n.updateDisp.shouldRender&&x(n)):1===n.action&&S(r,i)}}function k(t){if(t.subNodesToRemove)for(let e of t.subNodesToRemove)C(e);let e=t.oldVN;if(!e.anchorDN)return;let r=f(e),i=e.ownDN,n=null!=i?i:e.anchorDN,s=null!=i?null:function t(e,r){if(e.subNodes&&e.subNodes.length>0){let t=R(e.subNodes[e.subNodes.length-1]);if(t){let e=t.nextSibling;if(null!==e)return e}}for(let t=e.next;void 0!==t;t=t.next){if(!t.anchorDN)return null;const e=R(t);if(e)return e}return e.parent&&e.parent.anchorDN===r?t(e.parent,r):null}(e,n);e.subNodes=t.subNodeDisps?new Array(t.subNodeDisps.length):void 0,t.subNodeGroups?(function(t,e,r,i,n){let s,o,u,l,a,c,h=e.length-1;for(let d=r.length-1;d>=0;d--){let f=r[d];for(let r=f.last;r>=f.first;r--)u=e[r],l=u.newVN,a=u.oldVN,o=2===f.action?a:l,t.subNodes[h--]=o,2===f.action?((a.renderOnUpdate||a!==l)&&(u.updateDisp.shouldCommit&&a.commitUpdate(l),u.updateDisp.shouldRender&&k(u)),c=A(a),null!=c&&(n=c)):1===f.action&&(N(l,i,n),c=A(l),null!=c&&(n=c)),o.next=o.prev=void 0,s&&(s.prev=o,o.next=s),s=o;f.determineDNs(),f.firstDN&&(n=f.firstDN)}}(e,t.subNodeDisps,t.subNodeGroups,n,s),function(t,e,r,i){for(let n=e.length-1;n>0;n--){let s=e[n],o=e[n-1];null!=s.lastDN&&(s.lastDN.nextSibling!==i&&(s.lastDN.nextSibling===o.firstDN&&s.count>o.count?M(t,o,r,s.firstDN):M(t,s,r,i)),i=s.firstDN)}}(t.subNodeDisps,t.subNodeGroups,n,s)):t.subNodeDisps&&function(t,e,r,i){let n,s,o,u,l,a;for(let c=e.length-1;c>=0;c--){if(o=e[c],u=o.newVN,l=o.oldVN,s=2===o.action?l:u,t.subNodes[c]=s,2===o.action){(l.renderOnUpdate||l!==u)&&(o.updateDisp.shouldCommit&&l.commitUpdate(u),o.updateDisp.shouldRender&&k(o));let t=j(l);if(t.length>0){if(t[t.length-1].nextSibling!==i)for(let e of t)r.insertBefore(e,i);i=t[0]}}else 1===o.action&&(N(u,r,i),a=A(u),null!=a&&(i=a));s.next=s.prev=void 0,n&&(n.prev=s,s.next=n),n=s}}(e,t.subNodeDisps,n,s),f(r)}function M(t,e,r,i){for(let n=e.first;n<=e.last;n++){let s=j(2===e.action?t[n].oldVN:t[n].newVN);for(let t of s)r.insertBefore(t,i)}}class E{constructor(t,e,r,i){this.parentDisp=t,this.action=e,this.first=r,this.last=i}get count(){return this.last-this.first+1}determineDNs(){let t,e;for(let r=this.first;r<=this.last&&(t=this.parentDisp.subNodeDisps[r],e=2===this.action?t.oldVN:t.newVN,this.firstDN=A(e),!this.firstDN);r++);for(let r=this.last;r>=this.first&&(t=this.parentDisp.subNodeDisps[r],e=2===this.action?t.oldVN:t.newVN,this.lastDN=R(e),!this.lastDN);r--);}}function P(t,e){let r=e?e.length:0,i=t.oldVN.subNodes,n=i?i.length:0;if(0===r&&0===n)return;if(0===r)return void(t.subNodesToRemove=i);if(0===n)return t.subNodeDisps=e.map(t=>({newVN:t,action:1})),void(r>8&&(t.subNodeGroups=[new E(t,1,0,r-1)]));let s=!0,o=t.oldVN?t.oldVN.updateStrategy:void 0;if(o&&void 0!==o.allowKeyedNodeRecycling&&(s=o.allowKeyedNodeRecycling),1===r&&1===n)return void(t.subNodeDisps=[O(t,e[0],i[0],s)]);let u,l=new Map,a=[];for(let t of i)u=t.key,null==u||l.has(u)?a.push(t):l.set(u,t);let c=a.length;t.subNodeDisps=new Array(r);let h=0;if(e.forEach((e,r)=>{let i=null;u=e.key,null!=u&&(i=l.get(u),i&&l.delete(u)),i||h==c||(i=a[h++]),t.subNodeDisps[r]=O(t,e,i,s)}),l.size>0||h<c){t.subNodesToRemove||(t.subNodesToRemove=[]),l.forEach(e=>t.subNodesToRemove.push(e));for(let e=h;e<c;e++)t.subNodesToRemove.push(a[e])}r>8&&function(t){let e,r,i=t.subNodeDisps.length,n=new E(t,t.subNodeDisps[0].action,0);t.subNodeGroups=[n];for(let s=1;s<i;s++)r=t.subNodeDisps[s],e=r.action,(e!==n.action||2===e&&t.subNodeDisps[s-1].oldVN!==r.oldVN.prev)&&(n.last=s-1,n=new E(t,e,s),t.subNodeGroups.push(n));void 0!==n&&(n.last=i-1)}(t)}function O(t,e,r,i){let n={newVN:e};return r?r===e||(i||e.key===r.key)&&function(t,e){return t.constructor===e.constructor&&(void 0===t.isUpdatePossible||t.isUpdatePossible(e))}(r,e)?(n.action=2,n.oldVN=r):(n.action=1,t.subNodesToRemove||(t.subNodesToRemove=[]),t.subNodesToRemove.push(r)):n.action=1,n}function A(t){if(t.ownDN)return t.ownDN;if(!t.subNodes)return null;let e;for(let r of t.subNodes)if(e=A(r),e)return e;return null}function R(t){if(t.ownDN)return t.ownDN;if(!t.subNodes)return null;let e;for(let r=t.subNodes.length-1;r>=0;r--)if(e=R(t.subNodes[r]),null!=e)return e;return null}function j(t){let e=[];return function t(e,r){if(e.ownDN)r.push(e.ownDN);else if(e.subNodes)for(let i of e.subNodes)t(i,r)}(t,e),e}function U(t){let e=t.depth,r=Array(e);for(let i=0,n=t;i<e;i++,n=n.parent)r[i]=n.name+(n.creator&&n.creator.vn?` (created by ${n.creator.vn.name})`:"");return r}function B(t){if(null==t||!1===t)return null;if(t instanceof n.k)return t;if("string"==typeof t)return t.length>0?new n.j(t):null;if("function"==typeof t.render)return t.vn?t.vn:new n.g(t);if(Array.isArray(t))return T(t);if(t instanceof Promise)return new n.i({promise:t});if("function"==typeof t){return n.e.findVN(t)||new n.e({func:t,thisArg:d})}return new n.j(t.toString())}function V(t){let e=B(t);return e?Array.isArray(e)?0===e.length?null:e:[e]:null}function T(t){if(0===t.length)return null;let e=[];for(let r of t){let t=B(r);if(null!==t)if(Array.isArray(t))for(let r of t)e.push(r);else e.push(t)}return e.length>0?e:null}function W(t,e,r){if("string"==typeof t)return new n.c(t,e,r);if(t===i.b)return T(r);if(t===i.c){if(!e||!e.func)return;let t=e,r=n.e.findVN(e.func,t.key);return r?(t.replaceArgs&&r.replaceArgs(t.args),r):new n.e(e)}if(t===i.d){if(!e||!e.promise)return;return new n.i(e,r)}if("function"==typeof t){let i=1===r.length&&Array.isArray(r[0])?r[0]:r;return"function"==typeof t.prototype.render?new n.h(t,e,i):new n.f(t,e,i)}}},function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return u}));var i=r(1);function n(t){return Object(i.y)(t)}function s(t){return Object(i.z)(t)}function o(){let t,e,r=new Promise((function(r,i){t=r,e=i}));return r.resolve=t,r.reject=e,r}class u extends Promise{constructor(){super((function(t,e){this.resolve=t,this.reject=e}))}}},function(t,e){},function(t,e){},function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"f",(function(){return c})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"d",(function(){return m})),r.d(e,"h",(function(){return g})),r.d(e,"g",(function(){return y}));var i=r(0),n=r(2),s=r(6),o=r(1),u=r(3),l=function(t,e,r,i){var n,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,i);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(o=(s<3?n(o):s>3?n(e,r,o):n(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o};class a extends n.StyleDefinition{constructor(){super(...arguments),this.dialog=n.$class({border:[1,"solid","grey"],boxShadow:{x:4,y:4,blur:4,color:"lightgrey"},padding:0,maxWidth:"100%",maxHeight:"100%","::backdrop":{backgroundColor:"grey",opacity:.3}})}}class c extends i.a{constructor(t,e){super(),this.onKeyDown=t=>{var e;if("Escape"===t.key){t.preventDefault();let r=null===(e=this.options)||void 0===e?void 0:e.escapeReturnValue;void 0!==r&&this.close(r)}},this.onDetectClickOutside=t=>{var e;if(t.target!==this.dlg)return;let r=this.dlg.getBoundingClientRect();(t.clientX<r.left||t.clientX>r.right||t.clientY<r.top||t.clientY>r.bottom)&&this.close(null===(e=this.options)||void 0===e?void 0:e.escapeReturnValue)},this.onPointerMove=t=>{t.preventDefault(),this.dlg&&t.isPrimary?this.move(t.clientX-this.movePointOffsetX,t.clientY-this.movePointOffsetY):this.stopMove()},this.onPointerUp=t=>{t.preventDefault(),this.stopMove()},this._events=Object(u.b)(),this.content=t,this.options=e}open(){if(this.isOpen)return!1;this._returnValue=void 0,this.create(),this.dlg.show(),this.onOpen(!1)}showModal(){var t;if(this.isOpen)return Promise.reject(new Error("Popup already open"));return this._returnValue=void 0,this.create(),this.dlg.showModal(),window.addEventListener("keydown",this.onKeyDown),void 0!==(null===(t=this.options)||void 0===t?void 0:t.escapeReturnValue)&&this.dlg.addEventListener("click",this.onDetectClickOutside),this.modalPromise=Object(s.b)(),this.modalPromise}close(t){var e;if(this.isOpen){if(this.modalPromise){void 0!==(null===(e=this.options)||void 0===e?void 0:e.escapeReturnValue)&&this.dlg.removeEventListener("click",this.onDetectClickOutside),window.removeEventListener("keydown",this.onKeyDown),this.modalPromise.resolve(t),this.modalPromise=void 0}this.dlg.close(),this.destroy(),this._returnValue=t,this.onClose(t)}}get events(){return this._events}get isOpen(){return null!=this.dlg}isModeless(){return this.isOpen&&!this.modalPromise}isModal(){return this.isOpen&&null!=this.modalPromise}get returnValue(){return this._returnValue}get isVisible(){return this._isVisible}set isVisible(t){this._isVisible=t}setContent(t){this.content=t}startMove(t,e){if(!this.dlg)return;let r=this.dlg.getBoundingClientRect();this.movePointOffsetX=t-r.left,this.movePointOffsetY=e-r.top,this.dlg.style.margin="0",this.dlg.style.top=r.top+"px",this.dlg.style.left=r.left+"px",window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}stopMove(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this.movePointOffsetX=this.movePointOffsetY=0}moveTo(t,e){this.dlg&&(this.move(t,e),this.dlg.style.margin="0")}willMount(){this.vn.publishService("popup",this)}willUnmount(){this.vn.unpublishService("popup"),n.deactivate(this.defaultStyles),this.defaultStyles=null,this.optionalStyles&&(n.deactivate(this.optionalStyles),this.optionalStyles=null),this.dlg=null,this.anchorElement=null}render(){return this.content}create(){var t,e;this.anchorElement=this.options&&this.options.anchorElement?this.options.anchorElement:document.body,this.defaultStyles=n.activate(this.getDefaultStyles()),this.options&&this.options.styles&&(this.optionalStyles=n.activate(this.options.styles)),this.dlg=document.createElement("dialog"),this.dlg.className=n.chooseClass(null===(t=this.options)||void 0===t?void 0:t.dialogStyleClass,null===(e=this.optionalStyles)||void 0===e?void 0:e.dialog,this.defaultStyles.dialog),this.anchorElement.appendChild(this.dlg);let r={position:"fixed"};this.options&&void 0!==this.options.initialX?r.left=this.options.initialX:r.left=r.right=0,this.options&&void 0!==this.options.initialY?r.top=this.options.initialY:r.top=r.bottom=0,n.setElementStyle(this.dlg,r,1),i.g(this,this.dlg)}destroy(){i.l(this.dlg),this.dlg.remove()}move(t,e){t<0?t=0:t+30>window.innerWidth&&(t=window.innerWidth-30),e<0?e=0:e+30>window.innerHeight&&(e=window.innerHeight-30),this.dlg.style.left=t+"px",this.dlg.style.top=e+"px"}getDefaultStyles(){return a}onOpen(t){this._events.open.fire(t)}onClose(t){this._events.close.fire(t)}}l([Object(o.B)(0)],c.prototype,"content",void 0);class h extends a{constructor(){super(...arguments),this.dialogCaption=n.$class({backgroundColor:"dodgerblue",color:"white",boxShadow:{x:0,y:2,blur:2,color:"lightgrey"},padding:.4}),this.dialogBody=n.$class({padding:.7}),this.dialogButtonBar=n.$class({padding:[.7,1.01],display:"flex",justifyContent:"flex-end",alignItems:"center"}),this.dialogButton=n.$class({padding:.3,marginInlineStart:1.01,minWidth:5.5,border:"none",backgroundColor:15921906,":hover":{backgroundColor:14869218},":focus":{backgroundColor:14869218,outline:[1,"solid",10658466]}})}}class d extends c{constructor(t,e,r,...i){super(t,r),this.buttons=new Map,this.buttonKeys=new Map,this.nextButtonTabIndex=1001,this.captionContent=e;for(let t of i)this.addButton(t)}setCaption(t){this.captionContent=t}addButton(t){let e=new f(t,this.nextButtonTabIndex++);this.buttons.set(t.id,e),t.keycode&&this.buttonKeys.set(t.keycode,e)}get buttonCount(){return this.buttons.size}getDefaultStyles(){return h}willMount(){var t,e,r,i,s,o,u,l;super.willMount(),this.captionClassName=n.chooseClass(null===(t=this.options)||void 0===t?void 0:t.dialogCaptionStyleClass,null===(e=this.optionalStyles)||void 0===e?void 0:e.dialogCaption,this.defaultStyles.dialogCaption),this.bodyClassName=n.chooseClass(null===(r=this.options)||void 0===r?void 0:r.dialogBodyStyleClass,null===(i=this.optionalStyles)||void 0===i?void 0:i.dialogBody,this.defaultStyles.dialogBody),this.buttonBarClassName=n.chooseClass(null===(s=this.options)||void 0===s?void 0:s.dialogButtonBarStyleClass,null===(o=this.optionalStyles)||void 0===o?void 0:o.dialogButtonBar,this.defaultStyles.dialogButtonBar),this.buttonClassName=n.chooseClass(null===(u=this.options)||void 0===u?void 0:u.dialogButtonStyleClass,null===(l=this.optionalStyles)||void 0===l?void 0:l.dialogButton,this.defaultStyles.dialogButton),this.vn.publishService("dialog",this)}didMount(){var t,e;if(null!=(null===(t=this.options)||void 0===t?void 0:t.defaultButton)){let t=this.buttons.get(null===(e=this.options)||void 0===e?void 0:e.defaultButton);t&&t.elm.focus()}}willUnmount(){this.vn.unpublishService("dialog"),super.willUnmount()}render(){return i.f("div",{keydown:this.onButtonKeyDown},this.renderCaption,this.renderBody,this.renderButtons)}renderCaption(){return i.f("div",{class:this.captionClassName,pointerdown:this.onCaptionPointerDown,style:{touchAction:"none"}},this.captionContent)}renderBody(){return i.f("div",{class:this.bodyClassName},this.content)}renderButtons(){return i.f("div",{class:this.buttonBarClassName},Array.from(this.buttons.values()).map(t=>i.f("button",{id:t.btn.id,ref:t.elm,class:this.buttonClassName,click:()=>this.onButtonClicked(t)},t.btn.content)))}onCaptionPointerDown(t){t.isPrimary&&(t.preventDefault(),this.startMove(t.clientX,t.clientY))}onButtonClicked(t){t.btn.callback?t.btn.callback(t.btn.id):this.close(t.btn.returnValue)}onButtonKeyDown(t){let e=this.buttonKeys.get(t.key);e||(e=this.buttonKeys.get(t.code)),e&&(t.preventDefault(),this.onButtonClicked(e))}}l([o.B],d.prototype,"captionContent",void 0),l([Object(o.B)(3)],d.prototype,"buttons",void 0);class f{constructor(t,e){this.btn=t,this.disabled=t.disabled,this.tabIndex=e}}l([i.h],f.prototype,"elm",void 0);class p extends h{constructor(){super(...arguments),this.container=n.$class({display:"flex",flexDirection:"row",alignItems:"center"}),this.icon=n.$class({padding:"0.5rem",fontSize:"3em",fontWeight:900}),this.text=n.$class({padding:.5,minWidth:"15em",maxWidth:"60em",minHeight:"2em",maxHeight:"20em",overflow:"auto",verticalAlign:"middle"})}}class m extends d{constructor(t,e,r=1,i=0,n){super(t,e,{styles:p,escapeReturnValue:0===r?16:void 0,defaultButton:n}),this.icon=i,this.createButtons(r)}static showModal(t,e,r=1,i=0,n){return new m(t,e,r,i,n).showModal()}renderBody(){let{char:t,color:e}=this.getIconClassAndColor();return i.f("div",{class:this.optionalStyles.container},t&&i.f("span",{class:this.optionalStyles.icon,style:{color:e}},t),i.f("span",{class:this.optionalStyles.text},this.content))}getDefaultStyles(){return p}createButtons(t){switch(t){case 16:this.createButton("Close",16);break;case 1:this.createButton("OK",1);break;case 3:this.createButton("OK",1),this.createButton("Cancel",2,"Escape");break;case 12:this.createButton("Yes",4),this.createButton("No",8);break;case 14:this.createButton("Yes",4),this.createButton("No",8),this.createButton("Cancel",2,"Escape")}}getIconClassAndColor(){switch(this.icon){case 1:return{char:"i",color:"blue"};case 4:return{char:"?",color:"green"};case 2:return{char:"!",color:"orange"};case 3:return{char:"x",color:"red"};default:return{}}}createButton(t,e,r){this.addButton({id:e,content:t,returnValue:e,keycode:r})}}class g extends h{constructor(t){super(t),this.container=n.$class({width:"30rem",height:"5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"}),this.progress=n.$class({width:"20rem",height:"1rem",margin:"1rem"}),this.text=n.$class({textAlign:"center"}),this.dialogButtonBar.setProp("justifyContent","center")}}class y extends d{constructor(t,e,r){super(t,e,{styles:g}),this.delayHandle=0,null!=r&&this.addButton({id:1,content:"Cancel",returnValue:r})}static async showUntil(t,e,r,i=750){let n=new y(e,r);n.showModalWithDelay(i);try{return await t}finally{n.close()}}showModalWithDelay(t){this.delayHandle=setTimeout(()=>this.showNow(),t)}close(t){this.delayHandle>0&&(clearTimeout(this.delayHandle),this.delayHandle=0),super.close(t)}renderBody(){return i.f("div",{class:this.optionalStyles.container},i.f("progress",{class:this.optionalStyles.progress}),i.f("div",{class:this.optionalStyles.text},this.content))}getDefaultStyles(){return g}showNow(){this.delayHandle=0,this.showModal()}}},function(t,e,r){"use strict";r.r(e),r.d(e,"mimblStyleSchedulerType",(function(){return d}));var i=r(3);r.d(e,"EventSlot",(function(){return i.a})),r.d(e,"createMultiEventSlot",(function(){return i.b}));var n=r(4);r.d(e,"createTrigger",(function(){return n.d})),r.d(e,"createWatcher",(function(){return n.e})),r.d(e,"enterMutationScope",(function(){return n.f})),r.d(e,"exitMutationScope",(function(){return n.g})),r.d(e,"createComputedTrigger",(function(){return n.b})),r.d(e,"createMutator",(function(){return n.c})),r.d(e,"trigger",(function(){return n.h})),r.d(e,"computed",(function(){return n.a}));var s=r(6);r.d(e,"isSvg",(function(){return s.c})),r.d(e,"isSvgSvg",(function(){return s.d})),r.d(e,"createPromiseEx",(function(){return s.b})),r.d(e,"Defer",(function(){return s.a}));var o=r(7);for(var u in o)["default","mimblStyleSchedulerType","EventSlot","createMultiEventSlot","createTrigger","createWatcher","enterMutationScope","exitMutationScope","createComputedTrigger","createMutator","trigger","computed","isSvg","isSvgSvg","createPromiseEx","Defer"].indexOf(u)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(u);var l=r(8);for(var u in l)["default","mimblStyleSchedulerType","EventSlot","createMultiEventSlot","createTrigger","createWatcher","enterMutationScope","exitMutationScope","createComputedTrigger","createMutator","trigger","computed","isSvg","isSvgSvg","createPromiseEx","Defer"].indexOf(u)<0&&function(t){r.d(e,t,(function(){return l[t]}))}(u);var a=r(0);r.d(e,"jsx",(function(){return a.f})),r.d(e,"Ref",(function(){return a.e})),r.d(e,"ref",(function(){return a.h})),r.d(e,"setRef",(function(){return a.k})),r.d(e,"registerCustomAttribute",(function(){return a.i})),r.d(e,"registerCustomEvent",(function(){return a.j})),r.d(e,"Component",(function(){return a.a})),r.d(e,"Fragment",(function(){return a.b})),r.d(e,"FuncProxy",(function(){return a.c})),r.d(e,"PromiseProxy",(function(){return a.d})),r.d(e,"mount",(function(){return a.g})),r.d(e,"unmount",(function(){return a.l})),r.d(e,"updatable",(function(){return a.m}));var c=r(9);r.d(e,"DefaultPopupStyles",(function(){return c.b})),r.d(e,"Popup",(function(){return c.f})),r.d(e,"DefaultDialogStyles",(function(){return c.a})),r.d(e,"Dialog",(function(){return c.c})),r.d(e,"MsgBoxStyles",(function(){return c.e})),r.d(e,"MsgBox",(function(){return c.d})),r.d(e,"ProgressBoxStyles",(function(){return c.h})),r.d(e,"ProgressBox",(function(){return c.g}));var h=r(1);let d=Object(h.x)()}])}));
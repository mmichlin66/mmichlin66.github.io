!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("mimcss")):"function"==typeof define&&define.amd?define(["mimcss"],t):"object"==typeof exports?exports.mimbl=t(require("mimcss")):e.mimbl=t(e.mimcss)}(this,(function(e){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=6)}([function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||t.hasOwnProperty(s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s(7),t),r(s(2),t),r(s(3),t),r(s(8),t),r(s(9),t),r(s(10),t),r(s(11),t),r(s(12),t),r(s(13),t),r(s(14),t),r(s(15),t),r(s(16),t),r(s(17),t),r(s(18),t),r(s(19),t),r(s(20),t),r(s(21),t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatable=t.unmount=t.mount=t.PromiseProxy=t.FuncProxy=t.Fragment=t.Component=t.registerCustomEvent=t.registerCustomAttribute=t.setRef=t.ref=t.Ref=t.jsx=void 0;const i=s(0);t.jsx=function(e,t,...s){return i.createNodesFromJSX(e,t,s)};let r=Symbol("symRef");t.Ref=class{constructor(e,t){this.changedEvent=new i.EventSlot,void 0!==e&&this.changedEvent.attach(e),this[r]=t}addListener(e){this.changedEvent.attach(e)}removeListener(e){this.changedEvent.detach(e)}get r(){return this[r]}set r(e){this[r]!==e&&(this[r]=e,this.changedEvent.fire(e))}},t.ref=function(e,t){let s=Symbol(t+"_ref");function i(e){let t=e[s];return t||(t=new n,t.proxy=new Proxy({},t),e[s]=t),t}Object.defineProperty(e,t,{set(e){i(this).obj=e},get(){return i(this).proxy}})};class n{get(e,t,s){if("r"===t)return this.obj;let i=this.obj[t];return"function"==typeof i?i.bind(this.obj):i}set(e,t,s,i){return"r"===t?this.obj=s:this.obj[t]=s,!0}deleteProperty(e,t){return Reflect.deleteProperty(this.obj,t)}defineProperty(e,t,s){return Reflect.defineProperty(this.obj,t,s)}has(e,t){return Reflect.has(this.obj,t)}getPrototypeOf(e){return Reflect.getPrototypeOf(this.obj)}isExtensible(e){return Reflect.isExtensible(this.obj)}getOwnPropertyDescriptor(e,t){return Reflect.getOwnPropertyDescriptor(this.obj,t)}enumerate(e){return Array.from(Reflect.enumerate(this.enumerate))}ownKeys(e){return Reflect.ownKeys(this.obj)}}t.setRef=function(e,t,s){"object"==typeof e?void 0!==s&&e.r!==s||(e.r=t):"function"==typeof e&&e(t)},t.registerCustomAttribute=function(e,t){i.ElmAttr.registerProperty(e,{type:3,handlerClass:t})},t.registerCustomEvent=function(e){i.ElmAttr.registerProperty(e,{type:2})};class o{constructor(e){e&&(this.props=e)}get isMounted(){return null!=this.vn}updateMe(...e){if(this.vn)if(0===e.length)this.vn.requestUpdate();else for(let t of e)"function"==typeof t?i.FuncProxyVN.update(t,void 0,this):i.FuncProxyVN.update(t.func,t.key,t.thisArg?t.thisArg:this,!t.args||Array.isArray(t.args)?t.args:[t.args])}callMeBeforeUpdate(e,t){this.vn&&this.vn.scheduleCallBeforeUpdate(e,t||this)}callMeAfterUpdate(e,t){this.vn&&this.vn.scheduleCallAfterUpdate(e,t||this)}wrapCallback(e,t){return i.wrapCallbackWithVN(e,t||this,this.vn)}}t.Component=o,t.Fragment=function(e){};t.FuncProxy=class extends o{constructor(e){super(e)}render(){}static update(e,t,s,...r){i.FuncProxyVN.update(e,t,s,r)}};t.PromiseProxy=class extends o{constructor(e){super(e)}render(){}},t.mount=function(e,t=null){i.mountRoot(e,t)},t.unmount=function(e=null){i.unmountRoot(e)},t.updatable=function(e,t){let s="_m_"+t;Object.defineProperty(e,t,{set(e){if(this[s]!==e){this[s]=e;let t=this.vn;t&&!t.updateRequested&&this.vn.requestUpdate()}},get(){return this[s]}})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMultiEventSlot=t.EventSlot=void 0;class i{constructor(){this.fire=this.realFire}attach(e){this.listeners||(this.listeners=new Set),this.listeners.add(e)}detach(e){this.listeners&&(this.listeners.delete(e),0===this.listeners.size&&(this.listeners=null))}get count(){return this.listeners?this.listeners.size:0}clear(){this.listeners=null}realFire(){if(this.listeners)for(let e of this.listeners)e(...arguments)}}t.EventSlot=i,t.createMultiEventSlot=function(){return new Proxy({},new r)};class r{get(e,t,s){return this[t]?this[t]:new n(this,t)}}class n{constructor(e,t){this.handler=e,this.prop=t}fire(){this.slot&&this.slot.fire(...arguments)}clear(){this.slot&&this.slot.clear()}attach(e){this.slot||(this.slot=this.handler[this.prop]=new i),this.slot.attach(e)}detach(e){this.slot&&this.slot.detach(e)}get count(){return this.slot?this.slot.count:0}}},function(e,t,s){"use strict";var i;function r(e,t){return new n(e<0?0:e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.computed=t.trigger=t.createMutator=t.createComputedTrigger=t.exitMutationScope=t.enterMutationScope=t.createWatcher=t.createTrigger=void 0,function(e){e[e.Value=0]="Value",e[e.Shallow=1]="Shallow",e[e.Deep=100]="Deep"}(i||(i={})),t.createTrigger=r;class n{constructor(e,t){this.watchers=new Set,this.depth=e,this.v=f(t,this,e)}get(){return this.notifyRead(),this.v}set(e){e!==this.v&&(this.v=f(e,this,this.depth),this.notifyChanged())}notifyRead(){a.notifyTriggerRead(this)}notifyChanged(){this.watchers.size>0&&a.notifyTriggerChanged(this)}}let o=Symbol("symWatcher");function l(e,t,s,i){function r(...e){return r[o].execute(this,e)}return r[o]=new u(e,t,s,i),r.dispose=function(){let e=r[o];e&&e.dispose(),delete r[o]},r}t.createWatcher=l;class u{constructor(e,t,s,i){this.triggers=new Set,this.func=e,this.responder=t,this.funcThis=s,this.responderThis=i||s}execute(e,t){if(!this.func)throw new Error("Disposed watcher was called.");!this.funcThis&&e&&(this.funcThis=e,this.responderThis||(this.responderThis=e)),this.clean(),a.pushWatcher(this);try{return this.func.apply(this.funcThis,t)}finally{a.popWatcher()}}dispose(){this.func&&(this.clean(),this.func=null,this.responder=null,this.funcThis=null,this.responderThis=null)}respond(){this.responder&&this.responder.apply(this.responderThis)}clean(){this.triggers.forEach(e=>e.watchers.delete(this)),this.triggers.clear(),a.removeDeferredWatcher(this)}}let a=new class{constructor(){this.watcherStack=[],this.mutationScopesRefCount=0,this.deferredWatchers=new Set}pushWatcher(e){this.watcherStack.push(e)}popWatcher(){this.watcherStack.pop()}removeDeferredWatcher(e){this.deferredWatchers.delete(e)}enterMutationScope(){this.mutationScopesRefCount++}exitMutationScope(){if(0===this.mutationScopesRefCount)throw Error("Unpaired call to exitMutationScope");if(0==--this.mutationScopesRefCount){let e=Array.from(this.deferredWatchers.keys());this.deferredWatchers.clear(),e.forEach(e=>e.respond())}}notifyTriggerRead(e){for(let t of this.watcherStack)t.triggers.add(e),e.watchers.add(t)}notifyTriggerChanged(e){if(this.mutationScopesRefCount>0)e.watchers.forEach(e=>this.deferredWatchers.add(e));else{Array.from(e.watchers.keys()).forEach(e=>e.respond())}}};function c(e,t){return new h(e,t)}t.enterMutationScope=function(){a.enterMutationScope()},t.exitMutationScope=function(){a.exitMutationScope()},t.createComputedTrigger=c;class h extends n{constructor(e,t){super(i.Value),this.func=e,this.funcThis=t,this.isStale=!0}get(){return this.isStale&&(this.funcWatcher||(this.funcWatcher=l(this.func,this.responder,this.funcThis,this)),super.set(this.funcWatcher()),this.isStale=!1),super.get()}dispose(){this.func&&(this.funcWatcher&&(this.funcWatcher.dispose(),this.funcWatcher=null),this.func=null)}responder(){this.watchers.size>0?super.set(this.funcWatcher()):this.isStale=!0}}let d=Symbol("symMutator");t.createMutator=function(e,t){function s(...e){return s[o].execute(this,e)}return s[d]=new p(e,t),s.dispose=function(){let e=s[d];e&&e.dispose(),delete s[d]},s};class p{constructor(e,t){this.func=e,this.funcThis=t}execute(e,t){if(!this.func)throw new Error("Disposed mutator was called.");!this.funcThis&&e&&(this.funcThis=e),a.enterMutationScope();try{return this.func.apply(this.funcThis,t)}finally{a.exitMutationScope()}}dispose(){this.func&&(this.func=null,this.funcThis=null)}}function f(e,t,s){return e&&0!==s?Array.isArray(e)?new Proxy(e,new m(t,(s||i.Shallow)-1)):e instanceof Map?new Proxy(e,new v(t,(s||i.Shallow)-1)):e instanceof Set?new Proxy(e,new y(t,(s||i.Shallow)-1)):e.constructor===Object?new Proxy(e,new m(t,(s||i.Deep)-1)):e:e}class m{constructor(e,t){this.trigger=e,this.depth=t}get(e,t,s){return this.trigger.notifyRead(),Reflect.get(e,t,s)}set(e,t,s,i){return Reflect.get(e,t,i)==s||(this.trigger.notifyChanged(),Reflect.set(e,t,f(s,this.trigger,this.depth),i))}deleteProperty(e,t){return this.trigger.notifyChanged(),Reflect.deleteProperty(e,t)}defineProperty(e,t,s){return this.trigger.notifyChanged(),Reflect.defineProperty(e,t,s)}has(e,t){return this.trigger.notifyRead(),Reflect.has(e,t)}getPrototypeOf(e){return this.trigger.notifyRead(),Reflect.getPrototypeOf(e)}isExtensible(e){return this.trigger.notifyRead(),Reflect.isExtensible(e)}getOwnPropertyDescriptor(e,t){return this.trigger.notifyRead(),Reflect.getOwnPropertyDescriptor(e,t)}enumerate(e){return this.trigger.notifyRead(),Array.from(Reflect.enumerate(e))}ownKeys(e){return this.trigger.notifyRead(),Reflect.ownKeys(e)}}class g{constructor(e,t,s){this.wrappedMethods=new Map,this.trigger=e,this.mutatorMethodNames=t,this.depth=s}get(e,t,s){this.trigger.notifyRead();let i=this,r=this.wrappedMethods.get(t);if(!r){let s=e[t];if("function"!=typeof s)return s;let n=s.bind(e);r=this.mutatorMethodNames.has(t)?function(){let s=i.callOrgMutatorMethod(e,t,n,...arguments);return s[1]&&i.trigger.notifyChanged(),s[0]}:function(){return i.trigger.notifyRead(),n(...arguments)},this.wrappedMethods.set(t,r)}return r}callOrgMutatorMethod(e,t,s,...i){return[void 0,!1]}}class v extends g{constructor(e,t){super(e,v.mutatorMethodNames,t)}callOrgMutatorMethod(e,t,s,...i){if("clear"===t){let t=e.size>0;return s(),[void 0,t]}if("set"===t)return[s(i[0],f(i[1],this.trigger,this.depth)),!0];if("delete"===t){let e=s(i[0]);return[e,e]}}}v.mutatorMethodNames=new Set(["clear","delete","set"]);class y extends g{constructor(e,t){super(e,y.mutatorMethodNames,t)}callOrgMutatorMethod(e,t,s,...i){if("add"===t)return[s(f(i[0],this.trigger,this.depth)),!0];if("clear"===t){let t=e.size>0;return s(),[void 0,t]}if("delete"===t){let e=s(i[0]);return[e,e]}}}function b(e,t,s){let i=Symbol(s+"_trigger");Object.defineProperty(t,s,{get(){let t=this[i];return t||(this[i]=t=r(e)),t.get()},set(t){let s=this[i];s?s.set(t):this[i]=s=r(e,t)}})}y.mutatorMethodNames=new Set(["add","delete","clear"]),t.trigger=function(e,t){return"number"==typeof e?b.bind(void 0,e):b(void 0,e,t)},t.computed=function(e,t,s){let i=Symbol(t);if(s.value){let e=s.value;s.value=function(t){let s=this[i];return s||(this[i]=s=c(e,this)),s.get()}}else{if(!s.get)throw new Error("@computed property requires get() accessor");let e=s.get;if(s.get=function(){let t=this[i];return t||(this[i]=t=c(e,this)),t.get()},s.set){let e=s.set;s.set=function(t){a.enterMutationScope();try{e.call(this,t)}finally{a.exitMutationScope()}}}}}},function(t,s){t.exports=e},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defer=t.createPromiseEx=t.isSvgSvg=t.isSvg=void 0;const i=s(0);t.isSvg=function(e){return i.s_isSvg(e)},t.isSvgSvg=function(e){return i.s_isSvgSvg(e)},t.createPromiseEx=function(){let e,t,s=new Promise((function(s,i){e=s,t=i}));return s.resolve=e,s.reject=t,s};t.Defer=class extends Promise{constructor(){super((function(e,t){this.resolve=e,this.reject=t}))}}},function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||t.hasOwnProperty(s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.mimblStyleSchedulerType=void 0,r(s(2),t),r(s(3),t),r(s(5),t),r(s(22),t),r(s(23),t),r(s(1),t),r(s(24),t);const n=s(0);t.mimblStyleSchedulerType=n.s_initStyleScheduler()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.s_isSvgSvg=t.s_isSvg=t.s_deepCompare=void 0,t.s_deepCompare=function e(t,s){if(t===s)return!0;if(null==t&&null==s)return!0;if(null==t||null==s)return!1;if(typeof t!=typeof s)return!1;if("object"==typeof t){for(let i in t)if(!e(t[i],s[i]))return!1;for(let e in s)if(!(e in t))return!1}else{if(Array.isArray(t)!==Array.isArray(s))return!1;if(!Array.isArray(t))return!1;if(t.length!==s.length)return!1;for(let i=0,r=t.length;i<r;i++)if(!e(t[i],s[i]))return!1}return!0},t.s_isSvg=function(e){return"ownerSVGElement"in e},t.s_isSvgSvg=function(e){return"svg"===e.tagName}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElmAttr=void 0;const i=s(4);function r(e){return null==e?"":"string"==typeof e?e:Array.isArray(e)?e.map(e=>r(e)).filter(e=>!!e).join(" "):e.toString()}class n{static registerProperty(e,t){n.propInfos[e]=t}static getPropertyInfo(e){return n.propInfos[e]}static setAttr(e,t,s,i){if(void 0===s)e.setAttribute(t,r(i));else{let n=s.attrName;void 0===n&&(n=t),void 0!==s.set?s.set(e,n,i):e.setAttribute(n,r(i))}}static updateAttr(e,t,s,i,n){if(void 0===s)return i!==n&&(e.setAttribute(t,r(n)),!0);let o;if(void 0!==s.diff){if(o=s.diff(t,i,n),void 0===o)return!1}else i!==n&&(o=n);let l=s.attrName;return void 0===l&&(l=t),void 0!==s.update?s.update(e,l,o):(void 0!==s.remove&&s.remove(e,l),void 0!==s.set?s.set(e,l,o):e.setAttribute(l,r(o))),!0}static removeAttr(e,t,s){if(void 0===s)e.removeAttribute(t);else{let i=s.attrName;void 0===i&&(i=t),void 0!==s.remove?s.remove(e,i):e.removeAttribute(i)}}}function o(e,t,s){e.value=s}function l(e,t,s){}function u(e,t){}function a(e,t,s){e.checked=s}t.ElmAttr=n,n.propInfos={style:{type:1,set:function(e,t,s){i.setElementStyle(e,s,1)},diff:function(e,t,s){let r=i.diffStylesets(t,s);return null==r?void 0:r},update:function(e,t,s){i.setElementStringStyle(e,s,1)}},media:{type:1,set:function(e,t,s){e[t]=i.mediaQueryToString(s)},diff:function(e,t,s){if(t===s)return;let r=i.mediaQueryToString(t),n=i.mediaQueryToString(t);return n===r?void 0:n},update:function(e,t,s){e[t]=s}},value:{type:1,set:o,diff:function(e,t,s){return s},remove:function(e,t){e.value=null}},defaultValue:{type:1,set:o,diff:l,remove:u},checked:{type:1,set:a,diff:function(e,t,s){return s},remove:function(e,t){e.checked=!1}},defaultChecked:{type:1,set:a,diff:l,remove:u}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VNUpdateDisp=t.VN=void 0;const i=s(1),r=s(0);t.VN=class{constructor(){}init(e,t){this.parent=e,this.depth=this.parent?this.parent.depth+1:0,this.creator=t}term(){void 0!==this.publishedServices&&(this.publishedServices.forEach((e,t)=>r.notifyServiceUnpublished(t,this)),this.publishedServices.clear()),void 0!==this.subscribedServices&&(this.subscribedServices.forEach((e,t)=>r.notifyServiceUnsubscribed(t,this)),this.subscribedServices.clear()),this.next=void 0,this.prev=void 0,this.subNodes=void 0,this.creator=void 0,this.depth=void 0,this.parent=void 0}get isMounted(){return!!this.anchorDN}requestUpdate(){this.updateRequested||(r.requestNodeUpdate(this),this.updateRequested=!0)}scheduleCallBeforeUpdate(e,t){r.scheduleFuncCall(e,!0,t,this)}scheduleCallAfterUpdate(e,t){r.scheduleFuncCall(e,!1,t,this)}publishService(e,t){void 0===this.publishedServices&&(this.publishedServices=new Map),this.publishedServices.get(e)!==t&&(this.publishedServices.set(e,t),r.notifyServicePublished(e,this))}unpublishService(e){void 0!==this.publishedServices&&(this.publishedServices.delete(e),r.notifyServiceUnpublished(e,this),0===this.publishedServices.size&&(this.publishedServices=void 0))}subscribeService(e,t,s,o){void 0===this.subscribedServices&&(this.subscribedServices=new Map);let l=new n;l.ref=t,l.defaultService=s,l.useSelf=!!o,this.subscribedServices.set(e,l),r.notifyServiceSubscribed(e,this),i.setRef(t,this.getService(e,s))}unsubscribeService(e){if(void 0===this.subscribedServices)return;let t=this.subscribedServices.get(e);void 0!==t&&(i.setRef(t.ref,void 0),this.subscribedServices.delete(e),r.notifyServiceUnsubscribed(e,this),0===this.subscribedServices.size&&(this.subscribedServices=void 0))}getService(e,t,s){let i=this.findService(e,s);return void 0!==i?i:t}findService(e,t){if(t&&void 0!==this.publishedServices){let t=this.publishedServices.get(e);if(void 0!==t)return t}return this.parent?this.parent.findService(e,!0):void 0}notifyServiceChanged(e){if(void 0===this.subscribedServices)return;let t=this.subscribedServices.get(e);void 0!==t&&i.setRef(t.ref,this.getService(e,t.defaultService))}wrapCallback(e,t){return r.wrapCallbackWithVN(e,t,this)}};class n{}class o{constructor(e,t){this.shouldCommit=e,this.shouldRender=t}static getStockValue(e,t){return e?t?o.DoCommitDoRender:o.DoCommitNoRender:t?o.NoCommitDoRender:o.NoCommitNoRender}}t.VNUpdateDisp=o,o.DoCommitDoRender=new o(!0,!0),o.DoCommitNoRender=new o(!0,!1),o.NoCommitDoRender=new o(!1,!0),o.NoCommitNoRender=new o(!1,!1)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClassCompVN=void 0;const i=s(3),r=s(0);class n extends r.VN{get updateStrategy(){return this.comp.getUpdateStrategy?this.comp.getUpdateStrategy():void 0}render(){return this.renderWatcher()}willMount(){this.comp.vn=this,this.comp.willMount&&this.comp.willMount(),this.renderWatcher=i.createWatcher(this.comp.render,this.requestUpdate,this.comp,this)}willUnmount(){if(this.renderWatcher.dispose(),this.renderWatcher=null,this.comp.willUnmount)try{this.comp.willUnmount()}catch(e){console.error(`Exception in willUnmount of component '${this.name}'`,e)}this.comp.vn=void 0,this.comp=void 0}didMount(){if(this.comp.didMount)try{this.comp.didMount()}catch(e){console.error(`Exception in didMount of component '${this.name}'`,e)}}get supportsErrorHandling(){return void 0!==this.comp.handleError}handleError(e,t){this.comp.handleError(e,t)}}t.ClassCompVN=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndependentCompVN=void 0;const i=s(0);class r extends i.ClassCompVN{constructor(e){super(),this.comp=e}get name(){return this.comp.displayName?this.comp.displayName:this.comp.constructor.name}get key(){return this.comp}prepareUpdate(e){let t=e.comp,s=this.comp!==t;return s&&(this.willUnmount(),this.comp=t,this.willMount()),i.VNUpdateDisp.getStockValue(!1,s)}}t.IndependentCompVN=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedCompVN=void 0;const i=s(1),r=s(0);class n extends r.ClassCompVN{constructor(e,t,s){if(super(),this.compClass=e,this.props={},t){for(let e in t){let s=t[e];null!=s&&("key"===e?this.key=s:"ref"===e?this.ref=s:this.props[e]=s)}void 0===this.key&&(this.key=t.id)}this.props.children=s}get name(){if(this.comp&&this.comp.displayName)return this.comp.displayName;{let e=this.compClass.name;return null!=this.key&&(e+="@"+this.key),e}}willMount(){this.comp=new this.compClass(this.props),super.willMount(),void 0!==this.ref&&i.setRef(this.ref,this.comp)}willUnmount(){void 0!==this.ref&&i.setRef(this.ref,void 0,this.comp),super.willUnmount()}isUpdatePossible(e){return this.compClass===e.compClass}prepareUpdate(e){let t=e,s=!0;return void 0!==this.comp.shouldUpdate&&(s=this.comp.shouldUpdate(t.props)),t.ref!==this.ref?(this.ref=t.ref,void 0!==this.ref&&i.setRef(this.ref,this.comp)):void 0===t.ref&&i.setRef(this.ref,void 0,this.comp),this.key=t.key,Object.keys(this.props).forEach(e=>delete this.props[e]),Object.assign(this.props,t.props),r.VNUpdateDisp.getStockValue(!1,s)}}t.ManagedCompVN=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElmVN=void 0;const i=s(1),r=s(0);class n extends r.VN{constructor(e,t,s){super(),this.elmName=e,this.props=t,this.children=s,t&&(this.key=t.key,void 0===this.key&&(this.key=t.id))}get name(){let e=this.elmName;return null!=this.key&&(e+="@"+this.key),e}get ownDN(){return this.elm}render(){return this.children}mount(){let e=l.getSvgElmInfo(this.elmName);return this.isSvg=void 0!==e&&(!0!==e||this.anchorDN.namespaceURI.endsWith("svg")),this.elm=this.isSvg?this.elm=document.createElementNS(l.namespace,l.getElmName(e,this.elmName)):this.elm=document.createElement(this.elmName),this.parseProps(),this.attrs&&this.addAttrs(),this.events&&this.addEvents(),this.customAttrs&&this.addCustomAttrs(),void 0!==this.ref&&i.setRef(this.ref,this.elm),this.elm}unmount(){void 0!==this.ref&&i.setRef(this.ref,void 0,this.elm),this.customAttrs&&this.removeCustomAttrs(!0),this.elm=null}isUpdatePossible(e){return this.elmName===e.elmName}prepareUpdate(e){let t=!r.s_deepCompare(this.props,e.props),s=this.children&&this.children.length>0||e.children&&e.children.length>0;return this.props=e.props,this.children=e.children,{shouldCommit:t,shouldRender:s}}commitUpdate(e){const t=e;t.parseProps(),t.ref!==this.ref&&(this.ref=t.ref,void 0!==this.ref&&i.setRef(this.ref,this.elm)),this.key=t.key,this.updateStrategy=t.updateStrategy,this.updateAttrs(t.attrs),this.updateEvents(t.events),this.updateCustomAttrs(t.customAttrs)}parseProps(){if(!this.props)return;let e,t,s;for(let i in this.props)if("key"!==i&&(e=this.props[i],null!=e&&!1!==e))if("ref"===i)this.ref=e;else if("updateStrategy"===i)this.updateStrategy=e;else if(t=r.ElmAttr.getPropertyInfo(i),s=n.determineAttrType(t,e),1===s)this.attrs||(this.attrs={}),this.attrs[i]={info:t,val:e};else if(2===s){let s=o(t,e);s&&(this.events||(this.events={}),this.events[i]=s)}else this.customAttrs||(this.customAttrs={}),this.customAttrs[i]={info:t,val:e,handler:void 0}}static determineAttrType(e,t){return e?e.type:"function"==typeof t||Array.isArray(t)&&t.length>0&&"function"==typeof t[0]||"object"==typeof t&&"function"==typeof t.func?2:1}addAttrs(){for(let e in this.attrs){let t=this.attrs[e];r.ElmAttr.setAttr(this.elm,e,t.info,t.val)}}updateAttrs(e){let t=this.elm,s=this.attrs;if(s)for(let i in s){let n=s[i],o=e?e[i]:void 0;o&&o.val?r.ElmAttr.updateAttr(t,i,n.info,n.val,o.val):r.ElmAttr.removeAttr(t,i,n.info)}if(e)for(let i in e){if(s&&i in s)continue;let n=e[i];r.ElmAttr.setAttr(t,i,n.info,n.val)}this.attrs=e}addEvents(){for(let e in this.events)this.addEvent(e,this.events[e])}addEvent(e,t){t.wrapper=this.createEventWrapper(t),this.elm.addEventListener(e,t.wrapper,t.useCapture)}removeEvent(e,t){this.elm.removeEventListener(e,t.wrapper,t.useCapture)}updateEvents(e){let t=this.events;if(t)for(let s in t){let i=t[s],r=e?e[s]:void 0;r?this.updateEvent(s,i,r):this.removeEvent(s,i)}if(e)for(let s in e)t&&s in t||this.addEvent(s,e[s]);this.events=e}updateEvent(e,t,s){return t.orgFunc===s.orgFunc&&t.that===s.that&&t.useCapture==s.useCapture?(s.wrapper=t.wrapper,!1):(this.elm.removeEventListener(e,t.wrapper,t.useCapture),s.wrapper=this.createEventWrapper(s),this.elm.addEventListener(e,s.wrapper,s.useCapture),!0)}createEventWrapper(e){return this.wrapCallback(e.orgFunc,e.that?e.that:this.creator)}addCustomAttrs(){for(let e in this.customAttrs){let t=this.customAttrs[e];try{t.handler=new t.info.handlerClass(this,t.val,e)}catch(t){console.error(`Error creating handler for custom attribute '${e}': ${t.message}`),delete this.customAttrs[e];continue}}}removeCustomAttrs(e){for(let t in this.customAttrs){let s=this.customAttrs[t];try{s.handler.terminate(e)}catch(e){console.error(`Error terminating handler for custom attribute '${t}': ${e.message}`)}}}updateCustomAttrs(e){let t=this.customAttrs;if(t)for(let s in t){const i=t[s],r=e?e[s]:void 0;if(r){try{i.handler.update(r.val)}catch(e){console.error(`Error updating handler for custom attribute '${s}': ${e.message}`)}r.handler=i.handler}else try{i.handler.terminate(!1)}catch(e){console.error(`Error terminating handler for custom attribute '${s}': ${e.message}`)}}if(e)for(let s in e){if(t&&s in t)continue;let i=e[s];try{i.handler=new i.info.handlerClass(this,i.val,s)}catch(t){console.error(`Error creating handler for custom attribute '${s}': ${t.message}`),delete e[s];continue}}this.customAttrs=e}}function o(e,t){if("function"==typeof t)return{info:e,orgFunc:t};if(Array.isArray(t)){if(2===t.length)return"boolean"==typeof t[1]?{info:e,orgFunc:t[0],useCapture:t[1]}:{info:e,orgFunc:t[0],that:t[1]};if(3===t.length)return{info:e,orgFunc:t[0],that:t[1],useCapture:t[2]}}}t.ElmVN=n;class l{static register(e,t){l.infos[e]=t}static isSvgElm(e){return e in l.infos}static getSvgElmInfo(e){return l.infos[e]}static isDualPurpose(e){return Array.isArray(e)?e.length>1&&e[1]:"string"!=typeof e&&e}static isTagDualPurpose(e){let t=l.infos[e];return!!t&&l.isDualPurpose(t)}static getElmName(e,t){return Array.isArray(e)?e.length>0?e[0]:t:"string"==typeof e?e:t}static getElmNameForTag(e){let t=l.infos[e];return t?l.getElmName(t,e):e}}l.namespace="http://www.w3.org/2000/svg",l.infos={svg:!1,a:!0,animate:!1,animateMotion:!1,animateTransform:!1,circle:!1,clipPath:!1,colorProfile:"color-profile",defs:!1,desc:!1,discard:!1,ellipse:!1,feBlend:!1,feColorMatrix:!1,feComponentTransfer:!1,feComposite:!1,feConvolveMatrix:!1,feDiffuseLighting:!1,feDisplacementMap:!1,feDistantLight:!1,feDropShadow:!1,feFlood:!1,feFuncA:!1,feFuncB:!1,feFuncG:!1,feFuncR:!1,feGaussianBlur:!1,feImage:!1,feMerge:!1,feMergeNode:!1,feMorphology:!1,feOffset:!1,fePointLight:!1,feSpecularLighting:!1,feSpotLight:!1,feTile:!1,feTurbulence:!1,filter:!1,foreignObject:!1,g:!1,hatch:!1,hatchpath:!1,image:!1,line:!1,linearGradient:!1,marker:!1,mask:!1,metadata:!1,mpath:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,script:!0,set:!1,solidcolor:!1,stop:!1,style:!0,switch:!1,symbol:!1,text:!1,textPath:!1,title:!0,textSpan:!1,use:!1,view:!1}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FuncVN=void 0;const i=s(1),r=s(0);class n extends r.VN{constructor(e,t,s){if(super(),this.func=e,this.props={},t){for(let e in t){let s=t[e];null!=s&&("key"===e?this.key=s:this.props[e]=s)}void 0===this.key&&(this.key=t.id)}this.props.children=s}static isVNaFragment(e){return e.func===i.Fragment}get name(){let e=this.func.name;return null!=this.key&&(e+="@"+this.key),e}render(){return this.func(this.props)}isUpdatePossible(e){return this.func===e.func}prepareUpdate(e){let t=e;return this.key=t.key,this.func=t.func,this.props=t.props,r.VNUpdateDisp.NoCommitDoRender}}t.FuncVN=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FuncProxyVN=void 0;const i=s(0);let r=Symbol("symKeysToNodes");class n extends i.VN{constructor(e){super(),this.func=e.func,this.thisArg=e.thisArg,this.args=e.args,this.key=e.key,this.renderRequired=!1}replaceArgs(e){this.args=e,this.renderRequired=!0}get renderOnUpdate(){return this.renderRequired}get name(){let e=this.func.name;return null!=this.key&&(e+="@"+this.key),e}render(){return this.funcWatcher?this.funcWatcher(this.args):null}willMount(){void 0===this.thisArg&&(this.thisArg=this.creator),this.linkKey=this.key||this.thisArg||this.func,this.linkNodeToFunc(),this.funcWatcher=i.createWatcher(this.func,this.updateFromWatcher,this.thisArg,this)}willUnmount(){this.funcWatcher.dispose(),this.funcWatcher=null,this.unlinkNodeFromFunc()}isUpdatePossible(e){let t=e;return this.func===t.func&&this.thisArg===t.thisArg}prepareUpdate(e){let t=e;return this.key=t.key,this.linkKey=t.linkKey,this.args=t.args,i.VNUpdateDisp.DoCommitDoRender}commitUpdate(e){this.renderRequired=!1}static findVN(e,t,s){let n=t||s||i.s_currentClassComp||e,o=e[r];return o&&o.get(n)}static update(e,t,s,i){let r=n.findVN(e,t,s);r&&(r.args=i,r.renderRequired=!0,r.requestUpdate())}updateFromWatcher(){this.renderRequired=!0,this.requestUpdate()}linkNodeToFunc(){let e=this.func[r];e||(e=new Map,this.func[r]=e),e.set(this.linkKey,this)}unlinkNodeFromFunc(){let e=this.func[r];e&&e.delete(this.linkKey)}}t.FuncProxyVN=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseProxyVN=void 0;const i=s(0);class r extends i.VN{constructor(e,t){super(),this.promise=e.promise,this.errorContentFunc=e.errorContentFunc,this.content=t,this.key=e.key}get isSettled(){return null==this.promise}get name(){let e="Promise";return null!=this.key&&(e+="@"+this.key),e}render(){return this.content}willMount(){this.watchPromise()}isUpdatePossible(e){let t=e;return this.promise===t.promise}prepareUpdate(e){let t=e;return this.key=t.key,this.content=t.content,this.errorContentFunc=t.errorContentFunc,i.VNUpdateDisp.NoCommitDoRender}async watchPromise(){try{this.content=await this.promise,this.promise=null,this.isMounted&&this.requestUpdate()}catch(e){if(this.promise=null,this.content=null,!this.isMounted)return;if(this.errorContentFunc)try{this.content=this.errorContentFunc(e)}catch(e){console.warn("Unhandled rejected promise:",e)}else console.warn("Unhandled rejected promise:",e);this.requestUpdate()}}}t.PromiseProxyVN=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextVN=void 0;const i=s(0);class r extends i.VN{constructor(e){super(),this.text=e}get name(){return"#text"}get ownDN(){return this.textNode}mount(){return this.textNode=document.createTextNode(this.text)}unmount(){this.textNode=void 0}prepareUpdate(e){return i.VNUpdateDisp.getStockValue(this.text!==e.text,!1)}commitUpdate(e){this.textNode.nodeValue=this.text=e.text}}t.TextVN=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmountRoot=t.mountRoot=t.RootVN=void 0;const i=s(0);class r extends i.VN{constructor(e){super(),this.error=!1,this.waiting=!1,this.thrownPromises=new Set,this.anchorDN=e,this.depth=0}get name(){return"Root"}setContent(e,t){this.content=e,i.requestNodeUpdate(this)}render(){return this.error||this.waiting?null:this.content}willMount(){this.publishService("StdErrorHandling",this)}willUnmount(){this.unpublishService("StdErrorHandling")}get supportsErrorHandling(){return!0}handleError(e,t){if(e instanceof Promise){let t=e;this.thrownPromises.add(t),t.then(()=>{this.onPromiseFulfilled(t)}),t.catch(()=>{this.onPromiseFulfilled(t)}),this.waiting=!0}else console.error(`Unhandled error in component\n${t.join("\n")}\n`,e),this.error=!0}restart(){this.error=!1,i.requestNodeUpdate(this)}reportError(e,t){this.handleError(e,t),i.requestNodeUpdate(this)}onPromiseFulfilled(e){this.thrownPromises.delete(e),0===this.thrownPromises.size&&(this.waiting=!1,i.requestNodeUpdate(this))}}t.RootVN=r;let n=Symbol("symRootMountPoint");t.mountRoot=function(e,t){let s=t||document.body,i=s[n];i||(i=new r(s),s[n]=i,i.willMount()),i.setContent(e,!1)},t.unmountRoot=function(e){let t=e||document.body;if(!t)return;let s=t[n];s&&(delete t[n],s.setContent(null,!1),s.scheduleCallAfterUpdate(()=>s.willUnmount()))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.s_initStyleScheduler=void 0;const i=s(4),r=s(0);class n{init(e){this.doDOMUpdate=e}scheduleDOMUpdate(){r.scheduleFuncCall(this.onUpdate,!1,this)}cancelDOMUpdate(){}onUpdate(){this.doDOMUpdate()}}t.s_initStyleScheduler=function(){let e=i.registerScheduler(new n);return i.setDefaultSchedulerType(e),e}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyServiceUnsubscribed=t.notifyServiceSubscribed=t.notifyServiceUnpublished=t.notifyServicePublished=void 0;class i{constructor(){this.publishingVNs=new Set,this.subscribedVNs=new Set}}let r=new Map;t.notifyServicePublished=function(e,t){let s=r.get(e);void 0===s&&(s=new i,r.set(e,s)),s.publishingVNs.add(t);for(let t of s.subscribedVNs)t.notifyServiceChanged(e)},t.notifyServiceUnpublished=function(e,t){let s=r.get(e);if(void 0!==s)if(s.publishingVNs.delete(t),0===s.publishingVNs.size&&0===s.subscribedVNs.size)r.delete(e);else for(let t of s.subscribedVNs)t.notifyServiceChanged(e)},t.notifyServiceSubscribed=function(e,t){let s=r.get(e);void 0===s&&(s=new i,r.set(e,s)),s.subscribedVNs.add(t)},t.notifyServiceUnsubscribed=function(e,t){let s=r.get(e);void 0!==s&&(s.subscribedVNs.delete(t),0===s.publishingVNs.size&&0===s.subscribedVNs.size&&r.delete(e))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNodesFromJSX=t.scheduleFuncCall=t.requestNodeUpdate=t.wrapCallbackWithVN=t.s_currentClassComp=t.s_currentVN=void 0;const i=s(1),r=s(0);let n=new Set,o=new Map,l=new Map,u=0,a=0,c=0;function h(e){let s=t.s_currentVN;return t.s_currentVN=e,t.s_currentClassComp=e?null!=e.comp?e.comp:e.creator:null,s}function d(e,t,s){return!t&&s&&(t=null!=s.comp?s.comp:s.creator),p.bind(s,t,e)}function p(){let e=this,t=h(e||null);try{r.enterMutationScope();let[e,s,...i]=arguments;return s.apply(e,i)}catch(t){let s=null==e?void 0:e.getService("StdErrorHandling");if(!s)throw t;s.reportError(t,R(e))}finally{r.exitMutationScope(),h(t)}}function f(){0===u&&(u=requestAnimationFrame(m))}function m(){u=0,function(){if(c++,o.size>0){a=1;let e=o;o=new Map,g(e,!0)}if(n.size>0){a=2;let e=n;n=new Set,function(e){for(let t of e)S(t)}(function(e){let s,i=[];for(let r of e)if(r)for(let e of r){try{if(e.updateRequested=!1,e.lastUpdateTick===c)continue;s={newVN:e,action:0,oldVN:e},N(s),i.push(s)}catch(s){let i=e.getService("StdErrorHandling",void 0,!1);i?i.reportError(s,t.s_currentVN?R(t.s_currentVN):null):console.error("BUG: updateVirtual threw exception but StdErrorHandling service was not found.",s)}h(null)}return i}(function(e){let t=new Array(32);return e.forEach(e=>{if(!e.anchorDN)return;let s=t[e.depth];s||(s=[],t[e.depth]=s),s.push(e)}),t}(e)))}if(l.size>0){a=3;let e=l;l=new Map,g(e,!1)}a=0}()}function g(e,t){e.forEach((e,s)=>{try{e()}catch(e){console.error(`Exception while invoking function ${t?"before":"after"} updating components\n`,e)}})}function v(e,s){e.init(s,t.s_currentClassComp),e.willMount&&e.willMount();let i=h(e);if(e.render){let s=A(e.render());if(s){if(e.supportsErrorHandling)try{for(let t of s)v(t,e)}catch(i){if(e.handleError(i,R(t.s_currentVN)),s=A(e.render()),e.subNodes)for(let t of s)v(t,e)}else for(let t of s)v(t,e);let i;for(let e of s)i&&(i.next=e,e.prev=i),i=e}e.subNodes=s}h(i)}function y(e,t,s){let i=h(e);e.anchorDN=t;let r=e.mount?e.mount():void 0;if(r&&e.anchorDN.insertBefore(r,s),e.subNodes){let i=r||t,n=r?null:s;for(let t of e.subNodes)y(t,i,n)}e.didMount&&e.didMount(),h(i)}function b(e){let t=h(e),s=e.ownDN;if(function e(t,s){if(t.lastUpdateTick=c,s&&t.subNodes)for(let s of t.subNodes){let i=h(s);e(s,!0),h(i),t.term(),t.anchorDN=void 0}t.willUnmount&&t.willUnmount()}(e,null!=s),e.unmount&&e.unmount(),s)s.remove();else if(e.subNodes)for(let t=e.subNodes.length-1;t>=0;t--)b(e.subNodes[t]);e.term(),e.anchorDN=void 0,h(t)}function N(e){let s=e.oldVN,i=h(s),r=A(s.render());if(P(e,r),r)if(s.supportsErrorHandling)try{w(e)}catch(i){s.handleError(i,R(t.s_currentVN)),r=A(s.render()),P(e,r),w(e)}else w(e);s.lastUpdateTick=c,h(i)}function w(e){if(e.subNodeDisps){let t,s,i=e.oldVN;for(let r of e.subNodeDisps)t=r.oldVN,s=r.newVN,2===r.action?(t.renderOnUpdate||t!==s)&&t.prepareUpdate&&(r.updateDisp=t.prepareUpdate(s),r.updateDisp.shouldRender&&N(r)):1===r.action&&v(s,i)}}function S(e){if(e.subNodesToRemove)for(let t of e.subNodesToRemove)b(t);let t=e.oldVN;if(!t.anchorDN)return;let s=h(t),i=t.ownDN,r=null!=i?i:t.anchorDN,n=null!=i?null:function e(t,s){if(t.subNodes&&t.subNodes.length>0){let e=V(t.subNodes[t.subNodes.length-1]);if(e){let t=e.nextSibling;if(null!==t)return t}}for(let e=t.next;void 0!==e;e=e.next){if(!e.anchorDN)return null;const t=V(e);if(t)return t}return t.parent&&t.parent.anchorDN===s?e(t.parent,s):null}(t,r);t.subNodes=e.subNodeDisps?new Array(e.subNodeDisps.length):void 0,e.subNodeGroups?(function(e,t,s,i,r){let n,o,l,u,a,c,h=t.length-1;for(let d=s.length-1;d>=0;d--){let p=s[d];for(let s=p.last;s>=p.first;s--)l=t[s],u=l.newVN,a=l.oldVN,o=2===p.action?a:u,e.subNodes[h--]=o,2===p.action?((a.renderOnUpdate||a!==u)&&(l.updateDisp.shouldCommit&&a.commitUpdate(u),l.updateDisp.shouldRender&&S(l)),c=D(a),null!=c&&(r=c)):1===p.action&&(y(u,i,r),c=D(u),null!=c&&(r=c)),o.next=o.prev=void 0,n&&(n.prev=o,o.next=n),n=o;p.determineDNs(),p.firstDN&&(r=p.firstDN)}}(t,e.subNodeDisps,e.subNodeGroups,r,n),function(e,t,s,i){for(let r=t.length-1;r>0;r--){let n=t[r],o=t[r-1];null!=n.lastDN&&(n.lastDN.nextSibling!==i&&(n.lastDN.nextSibling===o.firstDN&&n.count>o.count?C(e,o,s,n.firstDN):C(e,n,s,i)),i=n.firstDN)}}(e.subNodeDisps,e.subNodeGroups,r,n)):e.subNodeDisps&&function(e,t,s,i){let r,n,o,l,u,a;for(let c=t.length-1;c>=0;c--){if(o=t[c],l=o.newVN,u=o.oldVN,n=2===o.action?u:l,e.subNodes[c]=n,2===o.action){(u.renderOnUpdate||u!==l)&&(o.updateDisp.shouldCommit&&u.commitUpdate(l),o.updateDisp.shouldRender&&S(o));let e=E(u);if(e.length>0){if(e[e.length-1].nextSibling!==i)for(let t of e)s.insertBefore(t,i);i=e[0]}}else 1===o.action&&(y(l,s,i),a=D(l),null!=a&&(i=a));n.next=n.prev=void 0,r&&(r.prev=n,n.next=r),r=n}}(t,e.subNodeDisps,r,n),h(s)}function C(e,t,s,i){for(let r=t.first;r<=t.last;r++){let n=E(2===t.action?e[r].oldVN:e[r].newVN);for(let e of n)s.insertBefore(e,i)}}t.s_currentVN=null,t.s_currentClassComp=null,t.wrapCallbackWithVN=d,t.requestNodeUpdate=function(e){e.anchorDN||console.warn(`Update requested for virtual node '${R(e).join("->")}' that doesn't have anchor DOM node`),function(e){if(n.add(e),e instanceof r.ClassCompVN){let t=e.comp;t.beforeUpdate&&1!==a&&o.set(t.beforeUpdate,d(t.beforeUpdate,t,e)),t.afterUpdate&&l.set(t.afterUpdate,d(t.beforeUpdate,t,e))}}(e),1!==a&&f()},t.scheduleFuncCall=function(e,t,s,i){t?o.has(e)||(o.set(e,d(e,s,i)),f()):l.has(e)||(l.set(e,d(e,s,i)),1!==a&&2!==a&&f())};class x{constructor(e,t,s,i){this.parentDisp=e,this.action=t,this.first=s,this.last=i}get count(){return this.last-this.first+1}determineDNs(){let e,t;for(let s=this.first;s<=this.last&&(e=this.parentDisp.subNodeDisps[s],t=2===this.action?e.oldVN:e.newVN,this.firstDN=D(t),!this.firstDN);s++);for(let s=this.last;s>=this.first&&(e=this.parentDisp.subNodeDisps[s],t=2===this.action?e.oldVN:e.newVN,this.lastDN=V(t),!this.lastDN);s--);}}function P(e,t){let s=t?t.length:0,i=e.oldVN.subNodes,r=i?i.length:0;if(0===s&&0===r)return;if(0===s)return void(e.subNodesToRemove=i);if(0===r)return e.subNodeDisps=t.map(e=>({newVN:e,action:1})),void(s>8&&(e.subNodeGroups=[new x(e,1,0,s-1)]));let n=!0,o=e.oldVN?e.oldVN.updateStrategy:void 0;if(o&&void 0!==o.allowKeyedNodeRecycling&&(n=o.allowKeyedNodeRecycling),1===s&&1===r)return void(e.subNodeDisps=[M(e,t[0],i[0],n)]);let l,u=new Map,a=[];for(let e of i)l=e.key,null==l||u.has(l)?a.push(e):u.set(l,e);let c=a.length;e.subNodeDisps=new Array(s);let h=0;if(t.forEach((t,s)=>{let i=null;l=t.key,null!=l&&(i=u.get(l),i&&u.delete(l)),i||h==c||(i=a[h++]),e.subNodeDisps[s]=M(e,t,i,n)}),u.size>0||h<c){e.subNodesToRemove||(e.subNodesToRemove=[]),u.forEach(t=>e.subNodesToRemove.push(t));for(let t=h;t<c;t++)e.subNodesToRemove.push(a[t])}s>8&&function(e){let t,s,i=e.subNodeDisps.length,r=new x(e,e.subNodeDisps[0].action,0);e.subNodeGroups=[r];for(let n=1;n<i;n++)s=e.subNodeDisps[n],t=s.action,(t!==r.action||2===t&&e.subNodeDisps[n-1].oldVN!==s.oldVN.prev)&&(r.last=n-1,r=new x(e,t,n),e.subNodeGroups.push(r));void 0!==r&&(r.last=i-1)}(e)}function M(e,t,s,i){let r={newVN:t};return s?s===t||(i||t.key===s.key)&&function(e,t){return e.constructor===t.constructor&&(void 0===e.isUpdatePossible||e.isUpdatePossible(t))}(s,t)?(r.action=2,r.oldVN=s):(r.action=1,e.subNodesToRemove||(e.subNodesToRemove=[]),e.subNodesToRemove.push(s)):r.action=1,r}function D(e){if(e.ownDN)return e.ownDN;if(!e.subNodes)return null;let t;for(let s of e.subNodes)if(t=D(s),t)return t;return null}function V(e){if(e.ownDN)return e.ownDN;if(!e.subNodes)return null;let t;for(let s=e.subNodes.length-1;s>=0;s--)if(t=V(e.subNodes[s]),null!=t)return t;return null}function E(e){let t=[];return function e(t,s){if(t.ownDN)s.push(t.ownDN);else if(t.subNodes)for(let i of t.subNodes)e(i,s)}(e,t),t}function R(e){let t=e.depth,s=Array(t);for(let i=0,r=e;i<t;i++,r=r.parent)s[i]=r.name+(r.creator&&r.creator.vn?` (created by ${r.creator.vn.name})`:"");return s}function k(e){if(null==e||!1===e)return null;if(e instanceof r.VN)return e;if("string"==typeof e)return e.length>0?new r.TextVN(e):null;if("function"==typeof e.render)return e.vn?e.vn:new r.IndependentCompVN(e);if(Array.isArray(e))return U(e);if(e instanceof Promise)return new r.PromiseProxyVN({promise:e});if("function"==typeof e){return r.FuncProxyVN.findVN(e)||new r.FuncProxyVN({func:e,thisArg:t.s_currentClassComp})}return new r.TextVN(e.toString())}function A(e){let t=k(e);return t?Array.isArray(t)?0===t.length?null:t:[t]:null}function U(e){if(0===e.length)return null;let t=[];for(let s of e){let e=k(s);if(null!==e)if(Array.isArray(e))for(let s of e)t.push(s);else t.push(e)}return t.length>0?t:null}t.createNodesFromJSX=function(e,t,s){if("string"==typeof e)return new r.ElmVN(e,t,s);if(e===i.Fragment)return U(s);if(e===i.FuncProxy){if(!t||!t.func)return;let e=t,s=r.FuncProxyVN.findVN(t.func,e.key);return s?(e.replaceArgs&&s.replaceArgs(e.args),s):new r.FuncProxyVN(t)}if(e===i.PromiseProxy){if(!t||!t.promise)return;return new r.PromiseProxyVN(t,s)}if("function"==typeof e){let i=1===s.length&&Array.isArray(s[0])?s[0]:s;return"function"==typeof e.prototype.render?new r.ManagedCompVN(e,t,i):new r.FuncVN(e,t,i)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(n<3?r(o):n>3?r(t,s,o):r(t,s))||o);return n>3&&o&&Object.defineProperty(t,s,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBox=t.ProgressBoxStyles=t.MsgBox=t.MsgBoxStyles=t.Dialog=t.DefaultDialogStyles=t.Popup=t.DefaultPopupStyles=void 0;const r=s(1),n=s(4),o=s(5),l=s(0),u=s(2);class a extends n.StyleDefinition{constructor(){super(...arguments),this.dialog=n.$class({border:[1,"solid","grey"],boxShadow:{x:4,y:4,blur:4,color:"lightgrey"},padding:0,maxWidth:"100%",maxHeight:"100%","::backdrop":{backgroundColor:"grey",opacity:.3}})}}t.DefaultPopupStyles=a;class c extends r.Component{constructor(e,t){super(),this.onKeyDown=e=>{var t;if("Escape"===e.key){e.preventDefault();let s=null===(t=this.options)||void 0===t?void 0:t.escapeReturnValue;void 0!==s&&this.close(s)}},this.onDetectClickOutside=e=>{var t;if(e.target!==this.dlg)return;let s=this.dlg.getBoundingClientRect();(e.clientX<s.left||e.clientX>s.right||e.clientY<s.top||e.clientY>s.bottom)&&this.close(null===(t=this.options)||void 0===t?void 0:t.escapeReturnValue)},this.onPointerMove=e=>{e.preventDefault(),this.dlg&&e.isPrimary?this.move(e.clientX-this.movePointOffsetX,e.clientY-this.movePointOffsetY):this.stopMove()},this.onPointerUp=e=>{e.preventDefault(),this.stopMove()},this._events=u.createMultiEventSlot(),this.content=e,this.options=t}open(){if(this.isOpen)return!1;this._returnValue=void 0,this.create(),this.dlg.show(),this.onOpen(!1)}showModal(){var e;if(this.isOpen)return Promise.reject(new Error("Popup already open"));return this._returnValue=void 0,this.create(),this.dlg.showModal(),window.addEventListener("keydown",this.onKeyDown),void 0!==(null===(e=this.options)||void 0===e?void 0:e.escapeReturnValue)&&this.dlg.addEventListener("click",this.onDetectClickOutside),this.modalPromise=o.createPromiseEx(),this.modalPromise}close(e){var t;if(this.isOpen){if(this.modalPromise){void 0!==(null===(t=this.options)||void 0===t?void 0:t.escapeReturnValue)&&this.dlg.removeEventListener("click",this.onDetectClickOutside),window.removeEventListener("keydown",this.onKeyDown),this.modalPromise.resolve(e),this.modalPromise=void 0}this.dlg.close(),this.destroy(),this._returnValue=e,this.onClose(e)}}get events(){return this._events}get isOpen(){return null!=this.dlg}isModeless(){return this.isOpen&&!this.modalPromise}isModal(){return this.isOpen&&null!=this.modalPromise}get returnValue(){return this._returnValue}get isVisible(){return this._isVisible}set isVisible(e){this._isVisible=e}setContent(e){this.content=e}startMove(e,t){if(!this.dlg)return;let s=this.dlg.getBoundingClientRect();this.movePointOffsetX=e-s.left,this.movePointOffsetY=t-s.top,this.dlg.style.margin="0",this.dlg.style.top=s.top+"px",this.dlg.style.left=s.left+"px",window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}stopMove(){window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this.movePointOffsetX=this.movePointOffsetY=0}moveTo(e,t){this.dlg&&(this.move(e,t),this.dlg.style.margin="0")}willMount(){this.vn.publishService("popup",this)}willUnmount(){this.vn.unpublishService("popup"),n.deactivate(this.defaultStyles),this.defaultStyles=null,this.optionalStyles&&(n.deactivate(this.optionalStyles),this.optionalStyles=null),this.dlg=null,this.anchorElement=null}render(){return this.content}create(){var e,t;this.anchorElement=this.options&&this.options.anchorElement?this.options.anchorElement:document.body,this.defaultStyles=n.activate(this.getDefaultStyles()),this.options&&this.options.styles&&(this.optionalStyles=n.activate(this.options.styles)),this.dlg=document.createElement("dialog"),this.dlg.className=n.chooseClass(null===(e=this.options)||void 0===e?void 0:e.dialogStyleClass,null===(t=this.optionalStyles)||void 0===t?void 0:t.dialog,this.defaultStyles.dialog),this.anchorElement.appendChild(this.dlg);let s={position:"fixed"};this.options&&void 0!==this.options.initialX?s.left=this.options.initialX:s.left=s.right=0,this.options&&void 0!==this.options.initialY?s.top=this.options.initialY:s.top=s.bottom=0,n.setElementStyle(this.dlg,s,1),r.mount(this,this.dlg)}destroy(){r.unmount(this.dlg),this.dlg.remove()}move(e,t){e<0?e=0:e+30>window.innerWidth&&(e=window.innerWidth-30),t<0?t=0:t+30>window.innerHeight&&(t=window.innerHeight-30),this.dlg.style.left=e+"px",this.dlg.style.top=t+"px"}getDefaultStyles(){return a}onOpen(e){this._events.open.fire(e)}onClose(e){this._events.close.fire(e)}}i([l.trigger(0)],c.prototype,"content",void 0),t.Popup=c;class h extends a{constructor(){super(...arguments),this.dialogCaption=n.$class({backgroundColor:"dodgerblue",color:"white",boxShadow:{x:0,y:2,blur:2,color:"lightgrey"},padding:.4}),this.dialogBody=n.$class({padding:.7}),this.dialogButtonBar=n.$class({padding:[.7,1.01],display:"flex",justifyContent:"flex-end",alignItems:"center"}),this.dialogButton=n.$class({padding:.3,marginInlineStart:1.01,minWidth:5.5,border:"none",backgroundColor:15921906,":hover":{backgroundColor:14869218},":focus":{backgroundColor:14869218,outline:[1,"solid",10658466]}})}}t.DefaultDialogStyles=h;class d extends c{constructor(e,t,s,...i){super(e,s),this.buttons=new Map,this.buttonKeys=new Map,this.nextButtonTabIndex=1001,this.captionContent=t;for(let e of i)this.addButton(e)}setCaption(e){this.captionContent=e}addButton(e){let t=new p(e,this.nextButtonTabIndex++);this.buttons.set(e.id,t),e.keycode&&this.buttonKeys.set(e.keycode,t)}get buttonCount(){return this.buttons.size}getDefaultStyles(){return h}willMount(){var e,t,s,i,r,o,l,u;super.willMount(),this.captionClassName=n.chooseClass(null===(e=this.options)||void 0===e?void 0:e.dialogCaptionStyleClass,null===(t=this.optionalStyles)||void 0===t?void 0:t.dialogCaption,this.defaultStyles.dialogCaption),this.bodyClassName=n.chooseClass(null===(s=this.options)||void 0===s?void 0:s.dialogBodyStyleClass,null===(i=this.optionalStyles)||void 0===i?void 0:i.dialogBody,this.defaultStyles.dialogBody),this.buttonBarClassName=n.chooseClass(null===(r=this.options)||void 0===r?void 0:r.dialogButtonBarStyleClass,null===(o=this.optionalStyles)||void 0===o?void 0:o.dialogButtonBar,this.defaultStyles.dialogButtonBar),this.buttonClassName=n.chooseClass(null===(l=this.options)||void 0===l?void 0:l.dialogButtonStyleClass,null===(u=this.optionalStyles)||void 0===u?void 0:u.dialogButton,this.defaultStyles.dialogButton),this.vn.publishService("dialog",this)}didMount(){var e,t;if(null!=(null===(e=this.options)||void 0===e?void 0:e.defaultButton)){let e=this.buttons.get(null===(t=this.options)||void 0===t?void 0:t.defaultButton);e&&e.elm.focus()}}willUnmount(){this.vn.unpublishService("dialog"),super.willUnmount()}render(){return r.jsx("div",{keydown:this.onButtonKeyDown},this.renderCaption,this.renderBody,this.renderButtons)}renderCaption(){return r.jsx("div",{class:this.captionClassName,pointerdown:this.onCaptionPointerDown,style:{touchAction:"none"}},this.captionContent)}renderBody(){return r.jsx("div",{class:this.bodyClassName},this.content)}renderButtons(){return r.jsx("div",{class:this.buttonBarClassName},Array.from(this.buttons.values()).map(e=>r.jsx("button",{id:e.btn.id,ref:e.elm,class:this.buttonClassName,click:()=>this.onButtonClicked(e)},e.btn.content)))}onCaptionPointerDown(e){e.isPrimary&&(e.preventDefault(),this.startMove(e.clientX,e.clientY))}onButtonClicked(e){e.btn.callback?e.btn.callback(e.btn.id):this.close(e.btn.returnValue)}onButtonKeyDown(e){let t=this.buttonKeys.get(e.key);t||(t=this.buttonKeys.get(e.code)),t&&(e.preventDefault(),this.onButtonClicked(t))}}i([l.trigger],d.prototype,"captionContent",void 0),i([l.trigger(3)],d.prototype,"buttons",void 0),t.Dialog=d;class p{constructor(e,t){this.btn=e,this.disabled=e.disabled,this.tabIndex=t}}i([r.ref],p.prototype,"elm",void 0);class f extends h{constructor(){super(...arguments),this.container=n.$class({display:"flex",flexDirection:"row",alignItems:"center"}),this.icon=n.$class({padding:n.rem(.5),fontSize:n.em(3),fontWeight:900}),this.text=n.$class({padding:.5,minWidth:n.em(15),maxWidth:n.em(60),minHeight:n.em(2),maxHeight:n.em(20),overflow:"auto",verticalAlign:"middle"})}}t.MsgBoxStyles=f;class m extends d{constructor(e,t,s=1,i=0,r){super(e,t,{styles:f,escapeReturnValue:0===s?16:void 0,defaultButton:r}),this.icon=i,this.createButtons(s)}static showModal(e,t,s=1,i=0,r){return new m(e,t,s,i,r).showModal()}renderBody(){let{char:e,color:t}=this.getIconClassAndColor();return r.jsx("div",{class:this.optionalStyles.container},e&&r.jsx("span",{class:this.optionalStyles.icon,style:{color:t}},e),r.jsx("span",{class:this.optionalStyles.text},this.content))}getDefaultStyles(){return f}createButtons(e){switch(e){case 16:this.createButton("Close",16);break;case 1:this.createButton("OK",1);break;case 3:this.createButton("OK",1),this.createButton("Cancel",2,"Escape");break;case 12:this.createButton("Yes",4),this.createButton("No",8);break;case 14:this.createButton("Yes",4),this.createButton("No",8),this.createButton("Cancel",2,"Escape")}}getIconClassAndColor(){switch(this.icon){case 1:return{char:"i",color:"blue"};case 4:return{char:"?",color:"green"};case 2:return{char:"!",color:"orange"};case 3:return{char:"x",color:"red"};default:return{}}}createButton(e,t,s){this.addButton({id:t,content:e,returnValue:t,keycode:s})}}t.MsgBox=m;class g extends h{constructor(e){super(e),this.container=n.$class({width:n.rem(30),height:n.rem(5),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"}),this.progress=n.$class({width:n.rem(20),height:n.rem(1),margin:n.rem(1)}),this.text=n.$class({textAlign:"center"}),this.dialogButtonBar.setProp("justifyContent","center")}}t.ProgressBoxStyles=g;class v extends d{constructor(e,t,s){super(e,t,{styles:g}),this.delayHandle=0,null!=s&&this.addButton({id:1,content:"Cancel",returnValue:s})}static async showUntil(e,t,s,i=750){let r=new v(t,s);r.showModalWithDelay(i);try{return await e}finally{r.close()}}showModalWithDelay(e){this.delayHandle=setTimeout(()=>this.showNow(),e)}close(e){this.delayHandle>0&&(clearTimeout(this.delayHandle),this.delayHandle=0),super.close(e)}renderBody(){return r.jsx("div",{class:this.optionalStyles.container},r.jsx("progress",{class:this.optionalStyles.progress}),r.jsx("div",{class:this.optionalStyles.text},this.content))}getDefaultStyles(){return g}showNow(){this.delayHandle=0,this.showModal()}}t.ProgressBox=v}])}));
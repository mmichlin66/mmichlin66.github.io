!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("mimbl"),require("mimurl"));else if("function"==typeof define&&define.amd)define(["mimbl","mimurl"],e);else{var r="object"==typeof exports?e(require("mimbl"),require("mimurl")):e(t.mimbl,t.mimurl);for(var l in r)("object"==typeof exports?exports:t)[l]=r[l]}}(this,function(t,e){return function(t){var e={};function r(l){if(e[l])return e[l].exports;var s=e[l]={i:l,l:!1,exports:{}};return t[l].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,l){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(l,s,function(e){return t[e]}.bind(null,s));return l},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";var l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=l(r(0));r(2);const n=r(3);this.mimurlDemoMain=function(t){s.mount(new n.MainForm,t)}},function(t,e,r){},function(t,e,r){"use strict";var l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=l(r(0)),n=l(r(4));r(5);e.MainForm=class extends s.Component{constructor(){super(...arguments),this.onPatternChange=t=>{this.pattern=t.target.value.trim(),this.update()},this.onUrlChange=t=>{this.url=t.target.value.trim(),this.update()}}render(){return s.jsx("div",null,s.jsx("p",{style:{margin:"4px"}},"Enter URL pattern and URL. Parsing and matching results will be displayed below."),this.renderForm(),this.parsedPattern&&this.parsedUrl&&this.renderMatchResult(),this.pattern&&this.pattern.length>0&&s.jsx("div",{class:"block"},s.jsx("h3",null,"URL Pattern"),this.renderStringWithRulers(this.pattern),s.jsx("br",null),this.renderPatternParsingResult()))}renderForm(){return s.jsx("table",{class:"layout"},s.jsx("colgroup",null,s.jsx("col",{style:{textAlign:"right",verticalAlign:"center"}}),s.jsx("col",{style:{textAlign:"left",verticalAlign:"middle",width:"100%"}})),s.jsx("tr",null,s.jsx("td",null,"Pattern:"),s.jsx("td",null,s.jsx("input",{type:"text",style:{width:"100%"},input:this.onPatternChange}))),s.jsx("tr",null,s.jsx("td",null,"URL:"),s.jsx("td",null,s.jsx("input",{type:"text",style:{width:"100%"},input:this.onUrlChange}))))}renderMatchResult(){return s.jsx("div",{class:"block"},s.jsx("h3",null,"Match Result"),s.jsx("div",{class:"matchResult"},!this.matchResult.success&&s.jsx(s.Placeholder,null,s.jsx("span",{class:"matchResultIcon",style:{color:"red"}},"☹"),this.renderMatchResultErrors(this.matchResult.errors)),this.matchResult.success&&s.jsx(s.Placeholder,null,s.jsx("span",{class:"matchResultIcon",style:{color:"green"}},"☺"),this.renderMatchResultFields(this.matchResult.fields))))}renderMatchResultFields(t){let e=[];for(let r in t){let l=t[r];null==l||isNaN(l)||JSON.stringify(l),e.push(s.jsx("tr",null,s.jsx("td",null,s.jsx("pre",null,r)),s.jsx("td",null,s.jsx("pre",null,this.renderFieldValue(t[r])))))}return e.length>0?s.jsx("table",{class:"data"},s.jsx("tr",null,s.jsx("th",null,"Field"),s.jsx("th",null,"Value")),e):s.jsx("p",null,"No fields were extracted from the URL")}renderFieldValue(t){return void 0===t?s.jsx("span",{style:{color:"blue"}},"undefined"):null===t?s.jsx("span",{style:{color:"blue"}},"null"):"string"==typeof t?s.jsx("span",{style:{color:"green"}},`"${t}"`):"number"==typeof t?isNaN(t)?s.jsx("span",{style:{color:"blue"}},"NaN"):s.jsx("span",{style:{color:"red"}},t):"boolean"==typeof t?s.jsx("span",{style:{color:"blue"}},`${t}`):Array.isArray(t)?s.jsx(s.Placeholder,null,s.jsx("span",{style:{color:"blue"}},"["),t.map((t,e)=>s.jsx(s.Placeholder,null,e>0&&s.jsx("span",{style:{color:"black"}},", "),this.renderFieldValue(t))),s.jsx("span",{style:{color:"blue"}},"]")):void 0}renderMatchResultErrors(t){return s.jsx("div",{class:"matchResultErrors"},t.map(t=>s.jsx("span",null,t)))}renderPatternParsingResult(){return s.jsx("div",{class:"patternParsing"},this.patternParsingError&&s.jsx(s.Placeholder,null,s.jsx("span",{class:"patternParsingIcon",style:{color:"red"}},"☹"),s.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.patternParsingError.message)),this.parsedPattern&&s.jsx(s.Placeholder,null,s.jsx("span",{class:"patternParsingIcon",style:{color:"green"}},"☺"),this.renderParsedPattern()))}renderParsedPattern(){let t=[];for(let e of this.parsedPattern.parts){if(!e)continue;let r=n.EUrlPart[e.urlPart],l=e.getSegments();if(l.length>0){let e=l[0];t.push(s.jsx("tr",null,s.jsx("td",{rowspan:l.length},r),s.jsx("td",null,this.pattern.substr(e.location.start,e.location.length)),s.jsx("td",null,this.getLocationString(e.location)),s.jsx("td",null,e.regExp),s.jsx("td",null,this.renderParsedSegmentFields(e))));for(let e=1;e<l.length;e++){let r=l[e];t.push(s.jsx("tr",null,s.jsx("td",null,this.pattern.substr(r.location.start,r.location.length)),s.jsx("td",null,this.getLocationString(r.location)),s.jsx("td",null,r.regExp),s.jsx("td",null,this.renderParsedSegmentFields(r))))}}}return s.jsx("table",{class:"data"},s.jsx("tr",null,s.jsx("th",null,"Part"),s.jsx("th",null,"Segment"),s.jsx("th",null,"Location"),s.jsx("th",null,"RegExp"),s.jsx("th",null,"Fields")),t)}getLocationString(t){return`${t.start} - ${t.start+t.length-1} (${t.length})`}renderParsedSegmentFields(t){let e=[];for(let r of t.fields){let t=!1;r.format===n.FieldFormat.String&&""!==r.defaultValue?t=!0:r.format===n.FieldFormat.Integer&&!isNaN(r.defaultValue)||r.format===n.FieldFormat.Float&&!isNaN(r.defaultValue)?t=!0:r.format===n.FieldFormat.Boolean&&void 0!==r.defaultValue&&(t=!0),e.push(s.jsx("span",null,r.name,r.isOptional&&"?",": ",n.FieldFormat[r.format],t&&" = ",t&&this.renderFieldValue(r.defaultValue)))}return s.jsx("div",{class:"parsedSegmentFields"},e)}renderPatternCompilationError(){return s.jsx("div",null)}renderCompiledPattern(){return s.jsx("table",{class:"data"})}renderStringWithRulers(t){return s.jsx("div",{class:"stringWithRulers"},s.jsx("pre",{class:"rulers"},this.ruler1,s.jsx("br",null),this.ruler2),s.jsx("pre",{class:"pattern"},t))}update(){if(this.ruler1="",this.ruler2="",this.patternParsingError=void 0,this.parsedPattern=void 0,this.patternCompilationError=void 0,this.urlParsingError=void 0,this.parsedUrl=void 0,this.matchResult=void 0,this.pattern&&this.pattern.length>0){for(let t=0;t<this.pattern.length;t++){let e=t.toString(),r=t%10;this.ruler1+=0===r?e:r>=e.length?" ":"",this.ruler2+=r.toString()}try{this.parsedPattern=n.parseUrlPattern(this.pattern)}catch(t){this.patternParsingError=t}}if(this.url&&this.url.length>0)try{this.parsedUrl=n.parseURL(this.url)}catch(t){this.urlParsingError=t}this.parsedPattern&&this.parsedUrl&&(this.matchResult=n.match(this.parsedUrl,this.parsedPattern)),this.updateMe()}}},function(t,r){t.exports=e},function(t,e,r){}])});
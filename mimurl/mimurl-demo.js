!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("mimbl"),require("mimurl"),require("mimcss"));else if("function"==typeof define&&define.amd)define(["mimbl","mimurl","mimcss"],t);else{var r="object"==typeof exports?t(require("mimbl"),require("mimurl"),require("mimcss")):t(e.mimbl,e.mimurl,e.mimcss);for(var s in r)("object"==typeof exports?exports:e)[s]=r[s]}}(this,(function(e,t,r){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var l=t[s]={i:s,l:!1,exports:{}};return e[s].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(s,l,function(t){return e[t]}.bind(null,l));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(0)),i=r(2);this.mimurlDemoMain=function(e){a.mount(new i.MainForm,e)}},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MainForm=void 0;const a=n(r(0)),i=n(r(3)),o=r(4);class u extends a.Component{render(){return a.jsx("div",{style:{margin:"12px"}},a.jsx("h2",null,"URL Parsing and Matching"),a.jsx("p",null,"This page demonstrates the capabilities of the ",a.jsx("b",null,"mimurl")," library for URL parsing and matching. Enter URL pattern and URL. Parsing and matching results will be displayed below."),this.renderForm(),this.renderMatchResult(),this.renderUrlPattern(),this.renderActualUrl())}renderForm(){return a.jsx("table",{class:o.styles.layout.name},a.jsx("colgroup",null,a.jsx("col",{style:{textAlign:"right",verticalAlign:"center"}}),a.jsx("col",{style:{textAlign:"left",verticalAlign:"middle",width:"100%"}})),a.jsx("tr",null,a.jsx("td",null,"Pattern:"),a.jsx("td",null,a.jsx("input",{type:"text",style:{width:"100%"},input:this.onPatternChange}))),a.jsx("tr",null,a.jsx("td",null,"URL:"),a.jsx("td",null,a.jsx("input",{type:"text",style:{width:"100%"},input:this.onUrlChange}))))}renderMatchResult(){let e;return e=this.parsedPattern&&this.parsedUrl?this.matchResult.success?a.jsx(a.Fragment,null,a.jsx("span",{class:o.styles.resultIcon.name,style:{color:"green"}},"☺"),this.renderMatchResultFields(this.matchResult.fields)):a.jsx(a.Fragment,null,a.jsx("span",{class:o.styles.resultIcon.name,style:{color:"red"}},"☹"),this.renderMatchResultErrors(this.matchResult.errors)):a.jsx("p",{class:o.styles.descr.name},"When you type a valid pattern and URL, this area will show the matching results"),a.jsx("div",{class:o.styles.block.name},a.jsx("h3",null,"Match Result"),a.jsx("div",{class:o.styles.matchArea.name},e))}renderMatchResultFields(e){let t=[];for(let r in e){let s=e[r];void 0===s||(null===s||(isNaN(s)||JSON.stringify(s)));t.push(a.jsx("tr",null,a.jsx("td",null,a.jsx("pre",null,r)),a.jsx("td",null,a.jsx("pre",null,this.renderFieldValue(e[r])))))}return t.length>0?a.jsx("table",{class:o.styles.data.name},a.jsx("tr",null,a.jsx("th",null,"Field"),a.jsx("th",null,"Value")),t):a.jsx("p",null,"No fields were extracted from the URL")}renderFieldValue(e){return void 0===e?a.jsx("span",{style:{color:"blue"}},"undefined"):null===e?a.jsx("span",{style:{color:"blue"}},"null"):"string"==typeof e?a.jsx("span",{style:{color:"green"}},`"${e}"`):"number"==typeof e?isNaN(e)?a.jsx("span",{style:{color:"blue"}},"NaN"):a.jsx("span",{style:{color:"red"}},e):"boolean"==typeof e?a.jsx("span",{style:{color:"blue"}},""+e):Array.isArray(e)?a.jsx(a.Fragment,null,a.jsx("span",{style:{color:"blue"}},"["),e.map((e,t)=>a.jsx(a.Fragment,null,t>0&&a.jsx("span",{style:{color:"black"}},", "),this.renderFieldValue(e))),a.jsx("span",{style:{color:"blue"}},"]")):void 0}renderMatchResultErrors(e){return a.jsx("div",{class:o.styles.matchResultErrors.name},e.map(e=>a.jsx("span",null,e)))}renderUrlPattern(){let e;return e=this.pattern&&0!==this.pattern.length?a.jsx(a.Fragment,null,this.renderStringWithRulers(this.pattern,this.patternRuler1,this.patternRuler2),a.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderPatternParsingResult()):a.jsx("p",{class:o.styles.descr.name},"When you type a pattern, this area will show how it is parsed"),a.jsx("div",{class:o.styles.block.name},a.jsx("h3",null,"URL Pattern"),a.jsx("div",{class:o.styles.parsingArea.name},e))}renderPatternParsingResult(){let e=this.patternParsingError?"red":"green",t=this.patternParsingError?"☹":"☺",r=this.patternParsingError?a.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.patternParsingError.message):this.renderParsedPattern();return a.jsx("div",{class:o.styles.parsingResult.name},a.jsx("span",{class:o.styles.resultIcon.name,style:{color:e}},t),r)}renderParsedPattern(){return a.jsx("table",{class:o.styles.data.name},a.jsx("tr",null,a.jsx("th",null,"Part"),a.jsx("th",null,"Segment"),a.jsx("th",null,"Location"),a.jsx("th",null,"RegExp"),a.jsx("th",null,"Fields")),this.parsedPattern.protocol&&this.renderParsedPatternSegments("Protocol",this.parsedPattern.protocol.getSegments()),this.parsedPattern.hostname&&this.renderParsedPatternSegments("Hostname",this.parsedPattern.hostname.getSegments()),this.parsedPattern.port&&this.renderParsedPatternSegments("Port",this.parsedPattern.port.getSegments()),this.parsedPattern.path&&this.renderParsedPatternSegments("Path",this.parsedPattern.path.getSegments()),this.parsedPattern.query&&this.renderParsedPatternQuery(this.parsedPattern.query),this.parsedPattern.hash&&this.renderParsedPatternSegments("Hash",this.parsedPattern.hash.getSegments()))}renderParsedPatternSegments(e,t){if(!t||0===t.length)return null;let r=[],s=t[0];r.push(a.jsx("tr",null,a.jsx("td",{rowspan:t.length},e),a.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),a.jsx("td",null,this.getLocationString(s.location)),a.jsx("td",null,s.regExp),a.jsx("td",null,this.renderParsedSegmentFields(s))));for(let e=1;e<t.length;e++){let s=t[e];r.push(a.jsx("tr",null,a.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),a.jsx("td",null,this.getLocationString(s.location)),a.jsx("td",null,s.regExp),a.jsx("td",null,this.renderParsedSegmentFields(s))))}return r}renderParsedPatternQuery(e){if(!e||0===Object.keys(e.parsedQSPs).length)return null;let t=[];for(let r in e.parsedQSPs){let s=e.parsedQSPs[r].segment;t.push(a.jsx("tr",null,a.jsx("td",null,`Query [${r}]`),a.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),a.jsx("td",null,this.getLocationString(s.location)),a.jsx("td",null,s.regExp),a.jsx("td",null,this.renderParsedSegmentFields(s))))}return t}getLocationString(e){return`${e.start} - ${e.start+e.length-1} (${e.length})`}renderParsedSegmentFields(e){let t=[];for(let r of e.fields){let e=!1;r.format===i.FieldFormat.String&&""!==r.defaultValue?e=!0:(r.format!==i.FieldFormat.Integer||isNaN(r.defaultValue))&&(r.format!==i.FieldFormat.Float||isNaN(r.defaultValue))?r.format===i.FieldFormat.Boolean&&void 0!==r.defaultValue&&(e=!0):e=!0,t.push(a.jsx("span",null,r.name,r.isOptional&&"?",": ",i.FieldFormat[r.format],e&&" = ",e&&this.renderFieldValue(r.defaultValue)))}return a.jsx("div",{class:o.styles.parsedSegmentFields.name},t)}renderActualUrl(){let e;return e=this.url&&0!==this.url.length?a.jsx(a.Fragment,null,this.renderStringWithRulers(this.url,this.urlRuler1,this.urlRuler2),a.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderUrlParsingResult()):a.jsx("p",{class:o.styles.descr.name},"When you type a URL, this area will show how it is parsed"),a.jsx("div",{class:o.styles.block.name},a.jsx("h3",null,"Actual URL"),a.jsx("div",{class:o.styles.parsingArea.name},e))}renderUrlParsingResult(){let e=this.urlParsingError?"red":"green",t=this.urlParsingError?"☹":"☺",r=this.urlParsingError?a.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.urlParsingError.message):this.renderParsedUrl();return a.jsx("div",{class:o.styles.parsingResult.name},a.jsx("span",{class:o.styles.resultIcon.name,style:{color:e}},t),r)}renderParsedUrl(){return a.jsx("table",{class:o.styles.data.name},a.jsx("tr",null,a.jsx("th",null,"Part"),a.jsx("th",null,"Content")),this.parsedUrl.protocol&&a.jsx("tr",null,a.jsx("td",null,"Protocol"),a.jsx("td",null,this.parsedUrl.protocol)),this.parsedUrl.hostname&&a.jsx("tr",null,a.jsx("td",null,"Hostname"),a.jsx("td",null,this.parsedUrl.hostname.join("."))),this.parsedUrl.port&&a.jsx("tr",null,a.jsx("td",null,"Port"),a.jsx("td",null,this.parsedUrl.port)),this.parsedUrl.path&&a.jsx("tr",null,a.jsx("td",null,"Path"),a.jsx("td",null,this.parsedUrl.path.join("/"))),this.parsedUrl.query&&this.renderParsedActualQuery(this.parsedUrl.query),this.parsedUrl.hash&&a.jsx("tr",null,a.jsx("td",null,"Hash"),a.jsx("td",null,this.parsedUrl.hash)))}renderParsedActualQuery(e){if(!e||0===Object.keys(e).length)return null;let t=[];for(let r in e){let s=e[r];t.push(a.jsx("tr",null,a.jsx("td",null,`Query [${r}]`),a.jsx("td",null,s.map(e=>a.jsx("div",null,e||"<empty>")))))}return t}renderStringWithRulers(e,t,r){return a.jsx("div",null,a.jsx("pre",{class:o.styles.rulers.name},t,a.jsx("br",null),r),a.jsx("pre",{class:o.styles.string.name},e))}onPatternChange(e){this.pattern=e.target.value.trim(),this.update()}onUrlChange(e){this.url=e.target.value.trim(),this.update()}update(){if(this.patternRuler1="",this.patternRuler2="",this.patternParsingError=void 0,this.parsedPattern=void 0,this.urlRuler1="",this.urlRuler2="",this.urlParsingError=void 0,this.parsedUrl=void 0,this.matchResult=void 0,this.pattern&&this.pattern.length>0){for(let e=0;e<this.pattern.length;e++){let t=e.toString(),r=e%10;this.patternRuler1+=0===r?t:r>=t.length?" ":"",this.patternRuler2+=r.toString()}try{this.parsedPattern=i.parseUrlPattern(this.pattern)}catch(e){this.patternParsingError=e}}if(this.url&&this.url.length>0){for(let e=0;e<this.url.length;e++){let t=e.toString(),r=e%10;this.urlRuler1+=0===r?t:r>=t.length?" ":"",this.urlRuler2+=r.toString()}try{this.parsedUrl=i.parseURL(this.url)}catch(e){this.urlParsingError=e}}this.parsedPattern&&this.parsedUrl&&(this.matchResult=i.match(this.parsedUrl,this.parsedPattern)),this.updateMe()}}t.MainForm=u},function(e,r){e.exports=t},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&s(t,e,r);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=n(r(5));a.enableShortNames(!0);class i extends a.StyleDefinition{constructor(){super(...arguments),this.init=[a.$style("*",{fontFamily:"Verdana, Geneva, Tahoma, sans-serif",fontSize:12,boxSizing:"border-box"}),a.$style("html",{height:"100%"}),a.$style("body",{height:"100%",margin:0}),a.$style("pre",{fontFamily:"'Courier New', Courier, monospace",margin:0})],this.layout=a.$class({}),this.data=a.$class({}),this.table=a.$style("table",{"&":[[this.layout,{border:"none",width:"100%","& ":[["tr",{border:"none","& ":[["td",{border:"none",padding:4}]]}]]}],[this.data,{border:[1,"solid","grey"],borderCollapse:"collapse","&":[["& th, & td",{border:"1px solid grey",textAlign:"left",verticalAlign:"center",padding:4}]]}]]}),this.block=a.$class({marginTop:8}),this.descr=a.$class({}),this.p=a.$style("p",{"&":[[this.descr,{marginLeft:"1em",marginRight:"1em"}]]}),this.matchArea=a.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"row"}),this.resultIcon=a.$class({fontSize:48,textAlign:"center",verticalAlign:"middle"}),this.matchResultErrors=a.$class({padding:4,display:"flex",flexDirection:"column"}),this.rulers=a.$class({color:"blue",margin:0}),this.string=a.$class({color:"green"}),this.parsingArea=a.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"column"}),this.parsingResult=a.$class({display:"flex",flexDirection:"row"}),this.parsedSegmentFields=a.$class({display:"flex",flexDirection:"column"})}}t.styles=a.activate(i)},function(e,t){e.exports=r}])}));
//# sourceMappingURL=mimurl-demo.js.map
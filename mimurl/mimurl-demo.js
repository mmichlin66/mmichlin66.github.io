!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("mimbl"),require("mimurl"),require("mimcss"));else if("function"==typeof define&&define.amd)define(["mimbl","mimurl","mimcss"],e);else{var r="object"==typeof exports?e(require("mimbl"),require("mimurl"),require("mimcss")):e(t.mimbl,t.mimurl,t.mimcss);for(var s in r)("object"==typeof exports?exports:t)[s]=r[s]}}(this,(function(t,e,r){return function(t){var e={};function r(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)r.d(s,l,function(e){return t[e]}.bind(null,l));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const l=s(r(0)),n=r(2);this.mimurlDemoMain=function(t){l.mount(new n.MainForm,t)}},function(t,e,r){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const l=s(r(0)),n=s(r(3)),a=r(4);class i extends l.Component{render(){return l.jsx("div",{style:{margin:"12px"}},l.jsx("h2",null,"URL Parsing and Matching"),l.jsx("p",null,"This page demonstrates the capabilities of the ",l.jsx("b",null,"mimurl")," library for URL parsing and matching. Enter URL pattern and URL. Parsing and matching results will be displayed below."),this.renderForm(),this.renderMatchResult(),this.renderUrlPattern(),this.renderActualUrl())}renderForm(){return l.jsx("table",{class:a.styles.layout.name},l.jsx("colgroup",null,l.jsx("col",{style:{textAlign:"right",verticalAlign:"center"}}),l.jsx("col",{style:{textAlign:"left",verticalAlign:"middle",width:"100%"}})),l.jsx("tr",null,l.jsx("td",null,"Pattern:"),l.jsx("td",null,l.jsx("input",{type:"text",style:{width:"100%"},input:this.onPatternChange}))),l.jsx("tr",null,l.jsx("td",null,"URL:"),l.jsx("td",null,l.jsx("input",{type:"text",style:{width:"100%"},input:this.onUrlChange}))))}renderMatchResult(){let t;return t=this.parsedPattern&&this.parsedUrl?this.matchResult.success?l.jsx(l.Fragment,null,l.jsx("span",{class:a.styles.resultIcon.name,style:{color:"green"}},"☺"),this.renderMatchResultFields(this.matchResult.fields)):l.jsx(l.Fragment,null,l.jsx("span",{class:a.styles.resultIcon.name,style:{color:"red"}},"☹"),this.renderMatchResultErrors(this.matchResult.errors)):l.jsx("p",{class:a.styles.descr.name},"When you type a valid pattern and URL, this area will show the matching results"),l.jsx("div",{class:a.styles.block.name},l.jsx("h3",null,"Match Result"),l.jsx("div",{class:a.styles.matchArea.name},t))}renderMatchResultFields(t){let e=[];for(let r in t){let s=t[r];void 0===s||(null===s||(isNaN(s)||JSON.stringify(s)));e.push(l.jsx("tr",null,l.jsx("td",null,l.jsx("pre",null,r)),l.jsx("td",null,l.jsx("pre",null,this.renderFieldValue(t[r])))))}return e.length>0?l.jsx("table",{class:a.styles.data.name},l.jsx("tr",null,l.jsx("th",null,"Field"),l.jsx("th",null,"Value")),e):l.jsx("p",null,"No fields were extracted from the URL")}renderFieldValue(t){return void 0===t?l.jsx("span",{style:{color:"blue"}},"undefined"):null===t?l.jsx("span",{style:{color:"blue"}},"null"):"string"==typeof t?l.jsx("span",{style:{color:"green"}},`"${t}"`):"number"==typeof t?isNaN(t)?l.jsx("span",{style:{color:"blue"}},"NaN"):l.jsx("span",{style:{color:"red"}},t):"boolean"==typeof t?l.jsx("span",{style:{color:"blue"}},""+t):Array.isArray(t)?l.jsx(l.Fragment,null,l.jsx("span",{style:{color:"blue"}},"["),t.map((t,e)=>l.jsx(l.Fragment,null,e>0&&l.jsx("span",{style:{color:"black"}},", "),this.renderFieldValue(t))),l.jsx("span",{style:{color:"blue"}},"]")):void 0}renderMatchResultErrors(t){return l.jsx("div",{class:a.styles.matchResultErrors.name},t.map(t=>l.jsx("span",null,t)))}renderUrlPattern(){let t;return t=this.pattern&&0!==this.pattern.length?l.jsx(l.Fragment,null,this.renderStringWithRulers(this.pattern,this.patternRuler1,this.patternRuler2),l.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderPatternParsingResult()):l.jsx("p",{class:a.styles.descr.name},"When you type a pattern, this area will show how it is parsed"),l.jsx("div",{class:a.styles.block.name},l.jsx("h3",null,"URL Pattern"),l.jsx("div",{class:a.styles.parsingArea.name},t))}renderPatternParsingResult(){let t=this.patternParsingError?"red":"green",e=this.patternParsingError?"☹":"☺",r=this.patternParsingError?l.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.patternParsingError.message):this.renderParsedPattern();return l.jsx("div",{class:a.styles.parsingResult.name},l.jsx("span",{class:a.styles.resultIcon.name,style:{color:t}},e),r)}renderParsedPattern(){return l.jsx("table",{class:a.styles.data.name},l.jsx("tr",null,l.jsx("th",null,"Part"),l.jsx("th",null,"Segment"),l.jsx("th",null,"Location"),l.jsx("th",null,"RegExp"),l.jsx("th",null,"Fields")),this.parsedPattern.protocol&&this.renderParsedPatternSegments("Protocol",this.parsedPattern.protocol.getSegments()),this.parsedPattern.hostname&&this.renderParsedPatternSegments("Hostname",this.parsedPattern.hostname.getSegments()),this.parsedPattern.port&&this.renderParsedPatternSegments("Port",this.parsedPattern.port.getSegments()),this.parsedPattern.path&&this.renderParsedPatternSegments("Path",this.parsedPattern.path.getSegments()),this.parsedPattern.query&&this.renderParsedPatternQuery(this.parsedPattern.query),this.parsedPattern.hash&&this.renderParsedPatternSegments("Hash",this.parsedPattern.hash.getSegments()))}renderParsedPatternSegments(t,e){if(!e||0===e.length)return null;let r=[],s=e[0];r.push(l.jsx("tr",null,l.jsx("td",{rowspan:e.length},t),l.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),l.jsx("td",null,this.getLocationString(s.location)),l.jsx("td",null,s.regExp),l.jsx("td",null,this.renderParsedSegmentFields(s))));for(let t=1;t<e.length;t++){let s=e[t];r.push(l.jsx("tr",null,l.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),l.jsx("td",null,this.getLocationString(s.location)),l.jsx("td",null,s.regExp),l.jsx("td",null,this.renderParsedSegmentFields(s))))}return r}renderParsedPatternQuery(t){if(!t||0===Object.keys(t.parsedQSPs).length)return null;let e=[];for(let r in t.parsedQSPs){let s=t.parsedQSPs[r].segment;e.push(l.jsx("tr",null,l.jsx("td",null,`Query [${r}]`),l.jsx("td",null,this.pattern.substr(s.location.start,s.location.length)),l.jsx("td",null,this.getLocationString(s.location)),l.jsx("td",null,s.regExp),l.jsx("td",null,this.renderParsedSegmentFields(s))))}return e}getLocationString(t){return`${t.start} - ${t.start+t.length-1} (${t.length})`}renderParsedSegmentFields(t){let e=[];for(let r of t.fields){let t=!1;r.format===n.FieldFormat.String&&""!==r.defaultValue?t=!0:(r.format!==n.FieldFormat.Integer||isNaN(r.defaultValue))&&(r.format!==n.FieldFormat.Float||isNaN(r.defaultValue))?r.format===n.FieldFormat.Boolean&&void 0!==r.defaultValue&&(t=!0):t=!0,e.push(l.jsx("span",null,r.name,r.isOptional&&"?",": ",n.FieldFormat[r.format],t&&" = ",t&&this.renderFieldValue(r.defaultValue)))}return l.jsx("div",{class:a.styles.parsedSegmentFields.name},e)}renderActualUrl(){let t;return t=this.url&&0!==this.url.length?l.jsx(l.Fragment,null,this.renderStringWithRulers(this.url,this.urlRuler1,this.urlRuler2),l.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderUrlParsingResult()):l.jsx("p",{class:a.styles.descr.name},"When you type a URL, this area will show how it is parsed"),l.jsx("div",{class:a.styles.block.name},l.jsx("h3",null,"Actual URL"),l.jsx("div",{class:a.styles.parsingArea.name},t))}renderUrlParsingResult(){let t=this.urlParsingError?"red":"green",e=this.urlParsingError?"☹":"☺",r=this.urlParsingError?l.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.urlParsingError.message):this.renderParsedUrl();return l.jsx("div",{class:a.styles.parsingResult.name},l.jsx("span",{class:a.styles.resultIcon.name,style:{color:t}},e),r)}renderParsedUrl(){return l.jsx("table",{class:a.styles.data.name},l.jsx("tr",null,l.jsx("th",null,"Part"),l.jsx("th",null,"Content")),this.parsedUrl.protocol&&l.jsx("tr",null,l.jsx("td",null,"Protocol"),l.jsx("td",null,this.parsedUrl.protocol)),this.parsedUrl.hostname&&l.jsx("tr",null,l.jsx("td",null,"Hostname"),l.jsx("td",null,this.parsedUrl.hostname.join("."))),this.parsedUrl.port&&l.jsx("tr",null,l.jsx("td",null,"Port"),l.jsx("td",null,this.parsedUrl.port)),this.parsedUrl.path&&l.jsx("tr",null,l.jsx("td",null,"Path"),l.jsx("td",null,this.parsedUrl.path.join("/"))),this.parsedUrl.query&&this.renderParsedActualQuery(this.parsedUrl.query),this.parsedUrl.hash&&l.jsx("tr",null,l.jsx("td",null,"Hash"),l.jsx("td",null,this.parsedUrl.hash)))}renderParsedActualQuery(t){if(!t||0===Object.keys(t).length)return null;let e=[];for(let r in t){let s=t[r];e.push(l.jsx("tr",null,l.jsx("td",null,`Query [${r}]`),l.jsx("td",null,s.map(t=>l.jsx("div",null,t||"<empty>")))))}return e}renderStringWithRulers(t,e,r){return l.jsx("div",null,l.jsx("pre",{class:a.styles.rulers.name},e,l.jsx("br",null),r),l.jsx("pre",{class:a.styles.string.name},t))}onPatternChange(t){this.pattern=t.target.value.trim(),this.update()}onUrlChange(t){this.url=t.target.value.trim(),this.update()}update(){if(this.patternRuler1="",this.patternRuler2="",this.patternParsingError=void 0,this.parsedPattern=void 0,this.urlRuler1="",this.urlRuler2="",this.urlParsingError=void 0,this.parsedUrl=void 0,this.matchResult=void 0,this.pattern&&this.pattern.length>0){for(let t=0;t<this.pattern.length;t++){let e=t.toString(),r=t%10;this.patternRuler1+=0===r?e:r>=e.length?" ":"",this.patternRuler2+=r.toString()}try{this.parsedPattern=n.parseUrlPattern(this.pattern)}catch(t){this.patternParsingError=t}}if(this.url&&this.url.length>0){for(let t=0;t<this.url.length;t++){let e=t.toString(),r=t%10;this.urlRuler1+=0===r?e:r>=e.length?" ":"",this.urlRuler2+=r.toString()}try{this.parsedUrl=n.parseURL(this.url)}catch(t){this.urlParsingError=t}}this.parsedPattern&&this.parsedUrl&&(this.matchResult=n.match(this.parsedUrl,this.parsedPattern)),this.updateMe()}}e.MainForm=i},function(t,r){t.exports=e},function(t,e,r){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const l=s(r(5));l.enableShortNames(!0);class n extends l.StyleDefinition{constructor(){super(...arguments),this.init=[l.$style("*",{fontFamily:"Verdana, Geneva, Tahoma, sans-serif",fontSize:12,boxSizing:"border-box"}),l.$style("html",{height:"100%"}),l.$style("body",{height:"100%",margin:0}),l.$style("pre",{fontFamily:"'Courier New', Courier, monospace",margin:0})],this.layout=l.$class({}),this.data=l.$class({}),this.table=l.$style("table",{"&":[[this.layout,{border:"none",width:"100%","& ":[["tr",{border:"none","& ":[["td",{border:"none",padding:4}]]}]]}],[this.data,{border:[1,"solid","grey"],borderCollapse:"collapse","&":[["& th, & td",{border:"1px solid grey",textAlign:"left",verticalAlign:"center",padding:4}]]}]]}),this.block=l.$class({marginTop:8}),this.descr=l.$class({}),this.p=l.$style("p",{"&":[[this.descr,{marginLeft:"1em",marginRight:"1em"}]]}),this.matchArea=l.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"row"}),this.resultIcon=l.$class({fontSize:48,textAlign:"center",verticalAlign:"middle"}),this.matchResultErrors=l.$class({padding:4,display:"flex",flexDirection:"column"}),this.rulers=l.$class({color:"blue",margin:0}),this.string=l.$class({color:"green"}),this.parsingArea=l.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"column"}),this.parsingResult=l.$class({display:"flex",flexDirection:"row"}),this.parsedSegmentFields=l.$class({display:"flex",flexDirection:"column"})}}e.styles=l.activate(n)},function(t,e){t.exports=r}])}));
//# sourceMappingURL=mimurl-demo.js.map
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("mimbl"),require("mimcss"),require("mimurl"));else if("function"==typeof define&&define.amd)define(["mimbl","mimcss","mimurl"],e);else{var r="object"==typeof exports?e(require("mimbl"),require("mimcss"),require("mimurl")):e(t.mimbl,t.mimcss,t.mimurl);for(var s in r)("object"==typeof exports?exports:t)[s]=r[s]}}(this,(function(t,e,r){return function(t){var e={};function r(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)r.d(s,l,function(e){return t[e]}.bind(null,l));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){"use strict";r.r(e);var s=r(0),l=r(2),n=r(1);n.enableShortNames(!0);class a extends n.StyleDefinition{constructor(){super(...arguments),this.init=[n.$style("*",{fontFamily:"Verdana, Geneva, Tahoma, sans-serif",fontSize:12,boxSizing:"border-box"}),n.$style("html",{height:"100%"}),n.$style("body",{height:"100%",margin:0}),n.$style("pre",{fontFamily:"'Courier New', Courier, monospace",margin:0})],this.layout=n.$class({}),this.data=n.$class({}),this.table=n.$style("table",{"&":[[this.layout,{border:"none",width:"100%","& ":[["tr",{border:"none","& ":[["td",{border:"none",padding:4}]]}]]}],[this.data,{border:[1,"solid","grey"],borderCollapse:"collapse","&":[["& th, & td",{border:"1px solid grey",textAlign:"left",verticalAlign:"center",padding:4}]]}]]}),this.block=n.$class({marginTop:8}),this.descr=n.$class({}),this.p=n.$style("p",{"&":[[this.descr,{marginLeft:"1em",marginRight:"1em"}]]}),this.matchArea=n.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"row"}),this.resultIcon=n.$class({fontSize:48,textAlign:"center",verticalAlign:"middle"}),this.matchResultErrors=n.$class({padding:4,display:"flex",flexDirection:"column"}),this.rulers=n.$class({color:"blue",margin:0}),this.string=n.$class({color:"green"}),this.parsingArea=n.$class({border:"1px solid brown",padding:2,backgroundColor:"beige",overflowX:"auto",display:"flex",flexDirection:"column"}),this.parsingResult=n.$class({display:"flex",flexDirection:"row"}),this.parsedSegmentFields=n.$class({display:"flex",flexDirection:"column"})}}let i=n.activate(a);class o extends s.Component{render(){return s.jsx("div",{style:{margin:"12px"}},s.jsx("h2",null,"URL Parsing and Matching"),s.jsx("p",null,"This page demonstrates the capabilities of the ",s.jsx("b",null,"mimurl")," library for URL parsing and matching. Enter URL pattern and URL. Parsing and matching results will be displayed below."),this.renderForm(),this.renderMatchResult(),this.renderUrlPattern(),this.renderActualUrl())}renderForm(){return s.jsx("table",{class:i.layout.name},s.jsx("colgroup",null,s.jsx("col",{style:{textAlign:"right",verticalAlign:"center"}}),s.jsx("col",{style:{textAlign:"left",verticalAlign:"middle",width:"100%"}})),s.jsx("tr",null,s.jsx("td",null,"Pattern:"),s.jsx("td",null,s.jsx("input",{type:"text",style:{width:"100%"},input:this.onPatternChange}))),s.jsx("tr",null,s.jsx("td",null,"URL:"),s.jsx("td",null,s.jsx("input",{type:"text",style:{width:"100%"},input:this.onUrlChange}))))}renderMatchResult(){let t;return t=this.parsedPattern&&this.parsedUrl?this.matchResult.success?s.jsx(s.Fragment,null,s.jsx("span",{class:i.resultIcon.name,style:{color:"green"}},"☺"),this.renderMatchResultFields(this.matchResult.fields)):s.jsx(s.Fragment,null,s.jsx("span",{class:i.resultIcon.name,style:{color:"red"}},"☹"),this.renderMatchResultErrors(this.matchResult.errors)):s.jsx("p",{class:i.descr.name},"When you type a valid pattern and URL, this area will show the matching results"),s.jsx("div",{class:i.block.name},s.jsx("h3",null,"Match Result"),s.jsx("div",{class:i.matchArea.name},t))}renderMatchResultFields(t){let e=[];for(let r in t){let l=t[r];void 0===l||(null===l||(isNaN(l)||JSON.stringify(l)));e.push(s.jsx("tr",null,s.jsx("td",null,s.jsx("pre",null,r)),s.jsx("td",null,s.jsx("pre",null,this.renderFieldValue(t[r])))))}return e.length>0?s.jsx("table",{class:i.data.name},s.jsx("tr",null,s.jsx("th",null,"Field"),s.jsx("th",null,"Value")),e):s.jsx("p",null,"No fields were extracted from the URL")}renderFieldValue(t){return void 0===t?s.jsx("span",{style:{color:"blue"}},"undefined"):null===t?s.jsx("span",{style:{color:"blue"}},"null"):"string"==typeof t?s.jsx("span",{style:{color:"green"}},`"${t}"`):"number"==typeof t?isNaN(t)?s.jsx("span",{style:{color:"blue"}},"NaN"):s.jsx("span",{style:{color:"red"}},t):"boolean"==typeof t?s.jsx("span",{style:{color:"blue"}},""+t):Array.isArray(t)?s.jsx(s.Fragment,null,s.jsx("span",{style:{color:"blue"}},"["),t.map((t,e)=>s.jsx(s.Fragment,null,e>0&&s.jsx("span",{style:{color:"black"}},", "),this.renderFieldValue(t))),s.jsx("span",{style:{color:"blue"}},"]")):void 0}renderMatchResultErrors(t){return s.jsx("div",{class:i.matchResultErrors.name},t.map(t=>s.jsx("span",null,t)))}renderUrlPattern(){let t;return t=this.pattern&&0!==this.pattern.length?s.jsx(s.Fragment,null,this.renderStringWithRulers(this.pattern,this.patternRuler1,this.patternRuler2),s.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderPatternParsingResult()):s.jsx("p",{class:i.descr.name},"When you type a pattern, this area will show how it is parsed"),s.jsx("div",{class:i.block.name},s.jsx("h3",null,"URL Pattern"),s.jsx("div",{class:i.parsingArea.name},t))}renderPatternParsingResult(){let t=this.patternParsingError?"red":"green",e=this.patternParsingError?"☹":"☺",r=this.patternParsingError?s.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.patternParsingError.message):this.renderParsedPattern();return s.jsx("div",{class:i.parsingResult.name},s.jsx("span",{class:i.resultIcon.name,style:{color:t}},e),r)}renderParsedPattern(){return s.jsx("table",{class:i.data.name},s.jsx("tr",null,s.jsx("th",null,"Part"),s.jsx("th",null,"Segment"),s.jsx("th",null,"Location"),s.jsx("th",null,"RegExp"),s.jsx("th",null,"Fields")),this.parsedPattern.protocol&&this.renderParsedPatternSegments("Protocol",this.parsedPattern.protocol.getSegments()),this.parsedPattern.hostname&&this.renderParsedPatternSegments("Hostname",this.parsedPattern.hostname.getSegments()),this.parsedPattern.port&&this.renderParsedPatternSegments("Port",this.parsedPattern.port.getSegments()),this.parsedPattern.path&&this.renderParsedPatternSegments("Path",this.parsedPattern.path.getSegments()),this.parsedPattern.query&&this.renderParsedPatternQuery(this.parsedPattern.query),this.parsedPattern.hash&&this.renderParsedPatternSegments("Hash",this.parsedPattern.hash.getSegments()))}renderParsedPatternSegments(t,e){if(!e||0===e.length)return null;let r=[],l=e[0];r.push(s.jsx("tr",null,s.jsx("td",{rowspan:e.length},t),s.jsx("td",null,this.pattern.substr(l.location.start,l.location.length)),s.jsx("td",null,this.getLocationString(l.location)),s.jsx("td",null,l.regExp),s.jsx("td",null,this.renderParsedSegmentFields(l))));for(let t=1;t<e.length;t++){let l=e[t];r.push(s.jsx("tr",null,s.jsx("td",null,this.pattern.substr(l.location.start,l.location.length)),s.jsx("td",null,this.getLocationString(l.location)),s.jsx("td",null,l.regExp),s.jsx("td",null,this.renderParsedSegmentFields(l))))}return r}renderParsedPatternQuery(t){if(!t||0===Object.keys(t.parsedQSPs).length)return null;let e=[];for(let r in t.parsedQSPs){let l=t.parsedQSPs[r].segment;e.push(s.jsx("tr",null,s.jsx("td",null,`Query [${r}]`),s.jsx("td",null,this.pattern.substr(l.location.start,l.location.length)),s.jsx("td",null,this.getLocationString(l.location)),s.jsx("td",null,l.regExp),s.jsx("td",null,this.renderParsedSegmentFields(l))))}return e}getLocationString(t){return`${t.start} - ${t.start+t.length-1} (${t.length})`}renderParsedSegmentFields(t){let e=[];for(let r of t.fields){let t=!1;r.format===l.FieldFormat.String&&""!==r.defaultValue?t=!0:(r.format!==l.FieldFormat.Integer||isNaN(r.defaultValue))&&(r.format!==l.FieldFormat.Float||isNaN(r.defaultValue))?r.format===l.FieldFormat.Boolean&&void 0!==r.defaultValue&&(t=!0):t=!0,e.push(s.jsx("span",null,r.name,r.isOptional&&"?",": ",l.FieldFormat[r.format],t&&" = ",t&&this.renderFieldValue(r.defaultValue)))}return s.jsx("div",{class:i.parsedSegmentFields.name},e)}renderActualUrl(){let t;return t=this.url&&0!==this.url.length?s.jsx(s.Fragment,null,this.renderStringWithRulers(this.url,this.urlRuler1,this.urlRuler2),s.jsx("hr",{style:{width:"100%",borderColor:"brown",borderWidth:"0.5px"}}),this.renderUrlParsingResult()):s.jsx("p",{class:i.descr.name},"When you type a URL, this area will show how it is parsed"),s.jsx("div",{class:i.block.name},s.jsx("h3",null,"Actual URL"),s.jsx("div",{class:i.parsingArea.name},t))}renderUrlParsingResult(){let t=this.urlParsingError?"red":"green",e=this.urlParsingError?"☹":"☺",r=this.urlParsingError?s.jsx("span",{style:{verticalAlign:"middle",paddingLeft:"8px"}},this.urlParsingError.message):this.renderParsedUrl();return s.jsx("div",{class:i.parsingResult.name},s.jsx("span",{class:i.resultIcon.name,style:{color:t}},e),r)}renderParsedUrl(){return s.jsx("table",{class:i.data.name},s.jsx("tr",null,s.jsx("th",null,"Part"),s.jsx("th",null,"Content")),this.parsedUrl.protocol&&s.jsx("tr",null,s.jsx("td",null,"Protocol"),s.jsx("td",null,this.parsedUrl.protocol)),this.parsedUrl.hostname&&s.jsx("tr",null,s.jsx("td",null,"Hostname"),s.jsx("td",null,this.parsedUrl.hostname.join("."))),this.parsedUrl.port&&s.jsx("tr",null,s.jsx("td",null,"Port"),s.jsx("td",null,this.parsedUrl.port)),this.parsedUrl.path&&s.jsx("tr",null,s.jsx("td",null,"Path"),s.jsx("td",null,this.parsedUrl.path.join("/"))),this.parsedUrl.query&&this.renderParsedActualQuery(this.parsedUrl.query),this.parsedUrl.hash&&s.jsx("tr",null,s.jsx("td",null,"Hash"),s.jsx("td",null,this.parsedUrl.hash)))}renderParsedActualQuery(t){if(!t||0===Object.keys(t).length)return null;let e=[];for(let r in t){let l=t[r];e.push(s.jsx("tr",null,s.jsx("td",null,`Query [${r}]`),s.jsx("td",null,l.map(t=>s.jsx("div",null,t||"<empty>")))))}return e}renderStringWithRulers(t,e,r){return s.jsx("div",null,s.jsx("pre",{class:i.rulers.name},e,s.jsx("br",null),r),s.jsx("pre",{class:i.string.name},t))}onPatternChange(t){this.pattern=t.target.value.trim(),this.update()}onUrlChange(t){this.url=t.target.value.trim(),this.update()}update(){if(this.patternRuler1="",this.patternRuler2="",this.patternParsingError=void 0,this.parsedPattern=void 0,this.urlRuler1="",this.urlRuler2="",this.urlParsingError=void 0,this.parsedUrl=void 0,this.matchResult=void 0,this.pattern&&this.pattern.length>0){for(let t=0;t<this.pattern.length;t++){let e=t.toString(),r=t%10;this.patternRuler1+=0===r?e:r>=e.length?" ":"",this.patternRuler2+=r.toString()}try{this.parsedPattern=l.parseUrlPattern(this.pattern)}catch(t){this.patternParsingError=t}}if(this.url&&this.url.length>0){for(let t=0;t<this.url.length;t++){let e=t.toString(),r=t%10;this.urlRuler1+=0===r?e:r>=e.length?" ":"",this.urlRuler2+=r.toString()}try{this.parsedUrl=l.parseURL(this.url)}catch(t){this.urlParsingError=t}}this.parsedPattern&&this.parsedUrl&&(this.matchResult=l.match(this.parsedUrl,this.parsedPattern)),this.updateMe()}}globalThis.mimurlDemoMain=function(t){s.mount(new o,t)}}])}));